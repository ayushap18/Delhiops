import{r as m,j as e,g as w,f as E,h as I,X as C,T as h,e as k,u as T,L as S}from"./index-LIPNnWQ7.js";import{u as D}from"./useApi-Caf7vIGF.js";import{A as O,R as j}from"./CategoricalChart-BdK7anDn.js";import{T as y,b as v,C as L,X as R,Y as A}from"./ChartTooltip-BmMmTnkw.js";import{P as _,a as M,A as P,b as f}from"./AreaChart-CMNzfxo5.js";import{C as H}from"./graphicalItemSelectors-OKOn1B9R.js";import{L as F}from"./Legend-BdfxPtcJ.js";import{P as V}from"./plus-DprA7sbM.js";import"./PolarChart-kkXazOly.js";import"./ActivePoints-DZzz5lA6.js";import"./getRadiusAndStrokeWidthFromDot-lZTj4Q4q.js";function Y(r){switch(r?.toLowerCase()){case"critical":return"#ff003c";case"high":return"#ff6600";case"medium":return"#ffb800";case"low":return"#00ff41";default:return"#3a5a3a"}}function U(r){switch(r){case"open":return"#ff003c";case"in_progress":return"#ffb800";case"resolved":return"#00ff41";case"closed":return"#3a5a3a";default:return"#3a5a3a"}}function $({data:r}){const a=m.useMemo(()=>{const n={},p={},x={};return r.forEach(c=>{n[c.type]=(n[c.type]||0)+1,p[c.severity]=(p[c.severity]||0)+1,x[c.status]=(x[c.status]||0)+1}),{types:n,severities:p,statuses:x}},[r]),s=a.statuses.open||0,t=a.statuses.in_progress||0,i=a.statuses.resolved||0,o=a.statuses.closed||0,l=(a.severities.critical||0)+(a.severities.high||0),d=[{label:"TOTAL",value:r.length,color:"#ffb800",icon:"▣"},{label:"OPEN",value:s,color:"#ff003c",icon:"◉"},{label:"IN PROGRESS",value:t,color:"#ffb800",icon:"⟳"},{label:"RESOLVED",value:i+o,color:"#00ff41",icon:"✓"}];return e.jsxs("div",{className:"bg-gray-950 border border-warning/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-warning/20 to-transparent"}),e.jsxs("h3",{className:"text-[10px] font-mono text-warning tracking-wider mb-4",children:[">"," INCIDENT_OVERVIEW // COMMAND CENTER"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:d.map(n=>e.jsxs("div",{className:"border px-2 py-3 text-center relative overflow-hidden",style:{borderColor:n.color+"20",backgroundColor:n.color+"05"},children:[e.jsx("span",{className:"text-[14px] block mb-1",style:{color:n.color+"60"},children:n.icon}),e.jsx("p",{className:"text-xl font-bold font-[Orbitron]",style:{color:n.color,textShadow:`0 0 12px ${n.color}30`},children:e.jsx(O,{value:n.value})}),e.jsx("p",{className:"text-[6px] font-mono tracking-wider text-gray-600 mt-0.5",children:n.label})]},n.label))}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-[8px] font-mono text-gray-600 tracking-wider mb-2",children:"SEVERITY MATRIX"}),e.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:["critical","high","medium","low"].map(n=>{const p=a.severities[n]||0,x=Y(n),c=r.length?Math.round(p/r.length*100):0;return e.jsxs("div",{className:"border px-2 py-1.5",style:{borderColor:x+"20",backgroundColor:x+"05"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[7px] font-mono tracking-wider",style:{color:x+"aa"},children:n.toUpperCase()}),e.jsx("span",{className:"text-[10px] font-mono font-bold",style:{color:x},children:p})]}),e.jsx("div",{className:"h-1 bg-gray-900 overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-700",style:{width:`${c}%`,backgroundColor:x,boxShadow:`0 0 4px ${x}60`}})})]},n)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] font-mono text-gray-600 tracking-wider mb-2",children:"RESOLUTION PIPELINE"}),e.jsx("div",{className:"flex items-center gap-0.5",children:[{status:"open",label:"OPEN",count:s},{status:"in_progress",label:"ACTIVE",count:t},{status:"resolved",label:"RESOLVED",count:i},{status:"closed",label:"CLOSED",count:o}].map((n,p)=>{const x=U(n.status);return e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex-1 text-center py-1.5 border relative",style:{borderColor:x+"30",backgroundColor:x+"08"},children:[e.jsx("p",{className:"text-[12px] font-bold font-[Orbitron]",style:{color:x},children:n.count}),e.jsx("p",{className:"text-[6px] font-mono text-gray-600",children:n.label})]}),p<3&&e.jsx("span",{className:"text-[10px] text-gray-700 px-0.5",children:"→"})]},n.status)})})]}),l>0&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 px-2 py-1.5 border border-danger/20 bg-danger/5",children:[e.jsx("div",{className:"w-2 h-2 bg-danger status-dot rounded-full"}),e.jsxs("span",{className:"text-[8px] font-mono text-danger tracking-wider",children:[l," HIGH/CRITICAL INCIDENTS REQUIRE ATTENTION"]})]})]})}function G(r){switch(r?.toLowerCase()){case"critical":return"#ff003c";case"high":return"#ff6600";case"medium":return"#ffb800";case"low":return"#00ff41";default:return"#3a5a3a"}}function W(r,a){return r>=28.68&&a<77.18?"NW DELHI":r>=28.68&&a>=77.26?"NE DELHI":r>=28.68?"N DELHI":r>=28.62&&r<28.68&&a>=77.18&&a<77.28?"CENTRAL":r>=28.6&&a<77.14?"W DELHI":r>=28.6&&a>=77.28?"E DELHI":r>=28.58&&r<28.64&&a>=77.18&&a<77.26?"NEW DELHI":r<28.58&&a<77.16?"SW DELHI":r<28.58&&a>=77.26?"SE DELHI":r<28.58?"S DELHI":"DELHI NCR"}function B({data:r}){const a=m.useMemo(()=>r.slice(0,15),[r]);return e.jsxs("div",{className:"bg-gray-950 border border-warning/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-warning/20 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-[10px] font-mono text-warning tracking-wider",children:[">"," INCIDENT_TIMELINE // EVENT LOG"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-warning rounded-full status-dot"}),e.jsx("span",{className:"text-[8px] font-mono text-warning tracking-widest",children:"LIVE"})]})]}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto pr-1",children:a.length===0?e.jsx("p",{className:"text-[10px] font-mono text-gray-600 text-center py-8 tracking-wider",children:"NO INCIDENTS RECORDED..."}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-px bg-warning/10"}),a.map((s,t)=>{const i=G(s.severity),o=W(s.location.lat,s.location.lng),l=s.status==="open"||s.status==="in_progress";return e.jsxs("div",{className:"relative pl-8 pb-3 animate-fade-up",style:{animationDelay:`${t*50}ms`},children:[e.jsx("div",{className:"absolute left-1.5 top-1 w-3 h-3 rounded-full border-2",style:{borderColor:i,backgroundColor:l?i:"transparent",boxShadow:l?`0 0 8px ${i}60`:"none"}}),e.jsxs("div",{className:"border px-3 py-2 hover:bg-warning/5 transition-colors",style:{borderColor:i+"15"},children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-mono font-bold text-gray-200 tracking-wider",children:s.type.toUpperCase()}),e.jsxs("span",{className:`text-[7px] font-mono tracking-wider ${w(s.severity)}`,children:["[",s.severity?.toUpperCase(),"]"]})]}),e.jsx(E,{status:s.status})]}),s.description&&e.jsx("p",{className:"text-[8px] font-mono text-gray-500 truncate mb-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 text-[7px] font-mono text-gray-600",children:[e.jsxs("span",{className:"text-warning/60",children:["#",s.id]}),e.jsx("span",{className:"text-gray-800",children:"|"}),e.jsx("span",{children:o}),e.jsx("span",{className:"text-gray-800",children:"|"}),e.jsx("span",{children:I(s.timestamp)})]})]})]},s.id)})]})}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-warning/5 flex items-center justify-between",children:[e.jsxs("span",{className:"text-[8px] font-mono text-gray-700 tracking-wider",children:["SHOWING ",a.length," / ",r.length]}),e.jsx("span",{className:"text-[8px] font-mono text-gray-700 tracking-wider",children:"NEWEST FIRST"})]})]})}const K={Fire:"#ff3300",Flooding:"#0088ff",Accident:"#ff6600",Medical:"#00ff41","Power Outage":"#ffb800",Protest:"#ff003c","Gas Leak":"#9945ff",Earthquake:"#cc6600",Stampede:"#ff0066"};function z(r){return K[r]||"#00d4ff"}function X({data:r}){const a=m.useMemo(()=>{const s={};return r.forEach(t=>{s[t.type]=(s[t.type]||0)+1}),Object.entries(s).map(([t,i])=>({name:t,value:i,color:z(t)})).sort((t,i)=>i.value-t.value)},[r]);return e.jsxs("div",{className:"bg-gray-950 border border-warning/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-warning/20 to-transparent"}),e.jsxs("h3",{className:"text-[10px] font-mono text-warning tracking-wider mb-1",children:[">"," INCIDENT_TYPES // CATEGORY BREAKDOWN"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider mb-3",children:"DISTRIBUTION BY EVENT CATEGORY"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{width:"55%",height:260,children:e.jsxs(_,{children:[e.jsx(M,{data:a,cx:"50%",cy:"50%",innerRadius:50,outerRadius:85,dataKey:"value",stroke:"#020a02",strokeWidth:2,animationDuration:1500,animationEasing:"ease-out",children:a.map((s,t)=>e.jsx(H,{fill:s.color},t))}),e.jsx(y,{content:e.jsx(v,{})})]})}),e.jsx("div",{className:"flex-1 space-y-1.5 pl-2",children:a.map(s=>e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-[8px] font-mono tracking-wider",style:{color:s.color+"cc"},children:s.name.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-10 h-1 bg-gray-900 overflow-hidden",children:e.jsx("div",{className:"h-full",style:{width:`${s.value/(a[0]?.value||1)*100}%`,backgroundColor:s.color}})}),e.jsx("span",{className:"text-[9px] font-mono font-bold tabular-nums",style:{color:s.color},children:s.value})]})]},s.name))})]})]})}function q({data:r}){const a=m.useMemo(()=>{const s={};return r.forEach(t=>{const i=new Date(t.timestamp),o=`${i.getMonth()+1}/${i.getDate()} ${i.getHours()}:00`;s[o]||(s[o]={critical:0,high:0,medium:0,low:0});const l=t.severity?.toLowerCase();l in s[o]&&s[o][l]++}),Object.entries(s).map(([t,i])=>({time:t,...i})).slice(-12)},[r]);return e.jsxs("div",{className:"bg-gray-950 border border-warning/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-warning/20 to-transparent"}),e.jsxs("h3",{className:"text-[10px] font-mono text-warning tracking-wider mb-1",children:[">"," SEVERITY_TREND // TIME ANALYSIS"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider mb-3",children:"INCIDENT SEVERITY OVER TIME"}),e.jsx(j,{width:"100%",height:260,children:e.jsxs(P,{data:a,children:[e.jsx(L,{strokeDasharray:"3 3",stroke:"#0a1a0a"}),e.jsx(R,{dataKey:"time",stroke:"#1a3a1a",tick:{fill:"#3a5a3a",fontSize:8,fontFamily:"JetBrains Mono"}}),e.jsx(A,{stroke:"#1a3a1a",tick:{fill:"#3a5a3a",fontSize:8,fontFamily:"JetBrains Mono"}}),e.jsx(y,{content:e.jsx(v,{})}),e.jsx(F,{wrapperStyle:{fontFamily:"JetBrains Mono",fontSize:"8px"}}),e.jsx(f,{type:"monotone",dataKey:"critical",stackId:"1",stroke:"#ff003c",fill:"#ff003c",fillOpacity:.3,animationDuration:1500,name:"Critical"}),e.jsx(f,{type:"monotone",dataKey:"high",stackId:"1",stroke:"#ff6600",fill:"#ff6600",fillOpacity:.25,animationDuration:1500,name:"High"}),e.jsx(f,{type:"monotone",dataKey:"medium",stackId:"1",stroke:"#ffb800",fill:"#ffb800",fillOpacity:.2,animationDuration:1500,name:"Medium"}),e.jsx(f,{type:"monotone",dataKey:"low",stackId:"1",stroke:"#00ff41",fill:"#00ff41",fillOpacity:.15,animationDuration:1500,name:"Low"})]})})]})}function g(r){switch(r?.toLowerCase()){case"critical":return"#ff003c";case"high":return"#ff6600";case"medium":return"#ffb800";case"low":return"#00ff41";default:return"#3a5a3a"}}function N(r){switch(r){case"open":return"#ff003c";case"in_progress":return"#ffb800";case"resolved":return"#00ff41";case"closed":return"#3a5a3a";default:return"#3a5a3a"}}function J({data:r}){const a=m.useMemo(()=>{const t=[...new Set(r.map(d=>d.type))].sort(),i=["critical","high","medium","low"],o={};t.forEach(d=>{o[d]={},i.forEach(n=>{o[d][n]=0})}),r.forEach(d=>{o[d.type]&&(o[d.type][d.severity]=(o[d.type][d.severity]||0)+1)});const l=Math.max(...Object.values(o).flatMap(d=>Object.values(d)),1);return{types:t,sevLevels:i,grid:o,maxVal:l}},[r]),s=m.useMemo(()=>r.filter(t=>(t.status==="open"||t.status==="in_progress")&&(t.severity==="critical"||t.severity==="high")).slice(0,5),[r]);return e.jsxs("div",{className:"bg-gray-950 border border-warning/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-warning/20 to-transparent"}),e.jsxs("h3",{className:"text-[10px] font-mono text-warning tracking-wider mb-1",children:[">"," TYPE × SEVERITY // CROSS MATRIX"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider mb-3",children:"INCIDENT DISTRIBUTION HEATMAP"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-[7px] font-mono text-gray-600 text-left pr-2 pb-1 tracking-wider",children:"TYPE"}),a.sevLevels.map(t=>e.jsx("th",{className:"text-[7px] font-mono text-center pb-1 px-1 tracking-wider",style:{color:g(t)+"cc"},children:t.toUpperCase().slice(0,4)},t)),e.jsx("th",{className:"text-[7px] font-mono text-gray-600 text-center pb-1 pl-2 tracking-wider",children:"TOTAL"})]})}),e.jsx("tbody",{children:a.types.map(t=>{const i=a.sevLevels.reduce((o,l)=>o+(a.grid[t]?.[l]||0),0);return e.jsxs("tr",{className:"hover:bg-warning/5 transition-colors",children:[e.jsx("td",{className:"text-[8px] font-mono text-gray-400 pr-2 py-1 tracking-wider",children:t.toUpperCase()}),a.sevLevels.map(o=>{const l=a.grid[t]?.[o]||0,d=l/a.maxVal,n=g(o);return e.jsx("td",{className:"text-center py-1 px-1",children:e.jsx("div",{className:"mx-auto w-8 h-6 flex items-center justify-center border transition-all",style:{borderColor:l>0?n+"30":"#0a1a0a",backgroundColor:l>0?n+Math.round(d*25).toString(16).padStart(2,"0"):"transparent",boxShadow:l>2?`0 0 8px ${n}30`:"none"},children:e.jsx("span",{className:"text-[9px] font-mono font-bold tabular-nums",style:{color:l>0?n:"#1a1a1a"},children:l||"·"})})},o)}),e.jsx("td",{className:"text-center py-1 pl-2",children:e.jsx("span",{className:"text-[9px] font-mono font-bold text-gray-400 tabular-nums",children:i})})]},t)})})]})}),s.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-warning/10",children:[e.jsxs("p",{className:"text-[8px] font-mono text-danger tracking-wider mb-2",children:["⚠ PRIORITY ALERTS (",s.length,")"]}),e.jsx("div",{className:"space-y-1",children:s.map(t=>e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 border-l-2",style:{borderLeftColor:g(t.severity)+"80"},children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:g(t.severity),boxShadow:`0 0 4px ${g(t.severity)}60`}}),e.jsxs("span",{className:"text-[8px] font-mono text-gray-300 flex-1 truncate",children:[t.type.toUpperCase()," — ",t.description?t.description.slice(0,40)+"...":"No description"]}),e.jsx("span",{className:"text-[7px] font-mono px-1 py-0.5 border",style:{color:N(t.status),borderColor:N(t.status)+"30"},children:t.status.toUpperCase().replace("_"," ")})]},t.id))})]})]})}function Q({open:r,onClose:a,onSuccess:s}){const[t,i]=m.useState({type:"",lat:"28.6139",lng:"77.2090",severity:"medium",description:"",status:"open"}),[o,l]=m.useState(""),[d,n]=m.useState(!1);if(!r)return null;const p=async c=>{c.preventDefault(),n(!0),l("");try{await k.post("/incidents",{type:t.type,location:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},severity:t.severity,description:t.description,status:t.status,timestamp:new Date().toISOString()}),s(),a()}catch(u){l(u.response?.data?.error?.message||"Failed to create incident")}finally{n(!1)}},x=(c,u)=>i(b=>({...b,[c]:u}));return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black/80",onClick:a}),e.jsxs("div",{className:"relative z-10 w-full max-w-lg bg-gray-950 border border-warning/10 p-6 shadow-[0_0_30px_rgba(255,184,0,0.05)] corner-borders max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-warning/20 to-transparent"}),e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-600 hover:text-gray-400","aria-label":"Close",children:e.jsx(C,{className:"h-4 w-4"})}),e.jsxs("h2",{className:"flex items-center gap-2 text-xs font-mono text-warning tracking-wider mb-4",children:[e.jsx(h,{className:"h-3.5 w-3.5"}),">"," CREATE_INCIDENT"]}),o&&e.jsxs("div",{className:"mb-4 border border-danger/20 bg-danger/5 p-3 text-[10px] font-mono text-danger tracking-wider",role:"alert",children:["[ERROR] ",o]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inc-type",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"INCIDENT_TYPE"}),e.jsx("input",{id:"inc-type",value:t.type,onChange:c=>x("type",c.target.value),required:!0,maxLength:100,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all",placeholder:"e.g., Fire, Flood, Accident"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inc-lat",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"LATITUDE"}),e.jsx("input",{id:"inc-lat",type:"number",step:"any",value:t.lat,onChange:c=>x("lat",c.target.value),required:!0,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inc-lng",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"LONGITUDE"}),e.jsx("input",{id:"inc-lng",type:"number",step:"any",value:t.lng,onChange:c=>x("lng",c.target.value),required:!0,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inc-severity",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"SEVERITY"}),e.jsxs("select",{id:"inc-severity",value:t.severity,onChange:c=>x("severity",c.target.value),className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:outline-none transition-all",children:[e.jsx("option",{value:"low",children:"LOW"}),e.jsx("option",{value:"medium",children:"MEDIUM"}),e.jsx("option",{value:"high",children:"HIGH"}),e.jsx("option",{value:"critical",children:"CRITICAL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inc-status",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"STATUS"}),e.jsxs("select",{id:"inc-status",value:t.status,onChange:c=>x("status",c.target.value),className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:outline-none transition-all",children:[e.jsx("option",{value:"open",children:"OPEN"}),e.jsx("option",{value:"in_progress",children:"IN_PROGRESS"}),e.jsx("option",{value:"resolved",children:"RESOLVED"}),e.jsx("option",{value:"closed",children:"CLOSED"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inc-desc",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"DESCRIPTION"}),e.jsx("textarea",{id:"inc-desc",value:t.description,onChange:c=>x("description",c.target.value),maxLength:5e3,rows:3,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all",placeholder:"Describe the incident..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"border border-brand/10 bg-gray-950 px-4 py-2 text-[10px] font-mono text-gray-400 hover:text-brand hover:border-brand/30 tracking-wider transition-colors",children:"CANCEL"}),e.jsx("button",{type:"submit",disabled:d,className:"border border-warning/20 bg-warning/5 px-4 py-2 text-[10px] font-mono text-warning hover:bg-warning/10 disabled:opacity-50 tracking-wider transition-colors",children:d?"PROCESSING...":"LOG_INCIDENT"})]})]})]})]})}function de(){const{canWrite:r}=T(),[a,s]=m.useState(!1),[t,i]=m.useState(!1);m.useEffect(()=>{i(!0)},[]);const{data:o,loading:l,refetch:d}=D("/incidents",{page:1,limit:50,params:{sort_by:"timestamp",sort_order:"desc"}}),n=m.useMemo(()=>o.filter(p=>p.status==="open"||p.status==="in_progress").length,[o]);return l&&!o.length?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(S,{})}):e.jsxs("div",{className:`space-y-4 ${t?"animate-fade-up":"opacity-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(h,{className:"h-5 w-5 text-warning drop-shadow-[0_0_6px_rgba(255,184,0,0.5)]"}),e.jsx("h1",{className:"text-lg font-bold text-warning font-[Orbitron] tracking-widest text-glow-warning",children:"INCIDENT DASHBOARD"}),n>0&&e.jsxs("div",{className:"flex items-center gap-1.5 ml-3 px-2 py-0.5 border border-warning/30 bg-warning/5",children:[e.jsx(h,{className:"h-3 w-3 text-warning"}),e.jsxs("span",{className:"text-[9px] font-mono tracking-wider text-warning",children:[n," ACTIVE"]})]})]}),e.jsxs("p",{className:"text-[10px] text-gray-600 font-mono tracking-[0.2em]",children:[">"," INCIDENT_COMMAND // REAL-TIME EVENT MANAGEMENT"]})]}),r&&e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 border border-warning/20 bg-warning/5 px-4 py-2 text-[10px] font-mono text-warning hover:bg-warning/10 tracking-wider transition-colors",children:[e.jsx(V,{className:"h-3 w-3"})," CREATE_INCIDENT"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx($,{data:o}),e.jsx(J,{data:o})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(X,{data:o}),e.jsx(q,{data:o})]}),e.jsx(B,{data:o}),e.jsx(Q,{open:a,onClose:()=>s(!1),onSuccess:d})]})}export{de as default};
