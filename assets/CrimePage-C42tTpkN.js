import{r as m,n as Le,j as e,f as Oe,g as Me,h as De,X as Re,S as fe,e as Pe,u as Ke,L as We,T as He}from"./index-LIPNnWQ7.js";import{u as Be}from"./useApi-Caf7vIGF.js";import{r as me,a7 as Fe,n as xe,a8 as _e,a9 as qe,aa as $e,ab as he,ac as pe,ad as Ge,ae as Ue,af as Ve,ag as Ye,ah as Je,ai as Xe,aj as Ze,ak as Qe,al as ge,u as ye,am as ze,an as et,ao as X,Q as tt,h as Z,L as O,ap as rt,aq as nt,X as at,W as st,ar as ve,as as it,at as ot,au as lt,av as be,A as M,R as je}from"./CategoricalChart-BdK7anDn.js";import{c as ct,d as dt,e as ut,f as ft,R as mt,C as xt,X as ht,Y as pt,T as gt,b as yt}from"./ChartTooltip-BmMmTnkw.js";import{P as vt}from"./Polygon-DGEnw1y9.js";import{B as bt,a as jt}from"./BarChart-DP76PTdv.js";import{L as Nt}from"./Legend-BdfxPtcJ.js";import{C as Et}from"./graphicalItemSelectors-OKOn1B9R.js";import{P as It}from"./plus-DprA7sbM.js";import"./ErrorBarContext-Bul-u9tG.js";var St={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}};function Ct(n){var a=me(n,St),{animationId:s,from:r,to:i,attributeName:t,isActive:o,canBegin:l,duration:c,easing:d,begin:f,onAnimationEnd:u,onAnimationStart:x,children:h}=a,p=o==="auto"?!qe.isSsr:o,g=Fe(s+t,a.animationManager),[v,b]=m.useState(()=>p?r:i),j=m.useRef(!1),E=m.useCallback(()=>{b(r),x()},[r,x]);if(m.useEffect(()=>{if(!p||!l)return xe;j.current=!0;var w=g.subscribe(b);return g.start([E,f,i,c,u]),()=>{g.stop(),w&&w(),u()}},[p,l,c,d,f,E,u,g,i,r]),!p)return h({[t]:i});if(!l)return h({[t]:r});if(j.current){var C=_e([t],c,d);return h({transition:C,[t]:v})}return h({[t]:r})}var R={},P={},K={},Q;function wt(){return Q||(Q=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function a(s){return typeof Buffer<"u"&&Buffer.isBuffer(s)}n.isBuffer=a})(K)),K}var W={},z;function Tt(){return z||(z=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function a(s){const r=s?.constructor,i=typeof r=="function"?r.prototype:Object.prototype;return s===i}n.isPrototype=a})(W)),W}var H={},ee;function kt(){return ee||(ee=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const a=ct();function s(r){return a.isTypedArray(r)}n.isTypedArray=s})(H)),H}var B={},F={},te;function At(){return te||(te=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const a=$e();function s(r){const i=a.toFinite(r),t=i%1;return t?i-t:i}n.toInteger=s})(F)),F}var re;function Lt(){return re||(re=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const a=At();function s(r,i){if(r=a.toInteger(r),r<1||!Number.isSafeInteger(r))return[];const t=new Array(r);for(let o=0;o<r;o++)t[o]=typeof i=="function"?i(o):o;return t}n.times=s})(B)),B}var ne;function Ot(){return ne||(ne=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const a=wt(),s=Tt(),r=he(),i=kt(),t=Lt();function o(f){if(f==null)return[];switch(typeof f){case"object":case"function":return r.isArrayLike(f)?d(f):s.isPrototype(f)?c(f):l(f);default:return l(Object(f))}}function l(f){const u=[];for(const x in f)u.push(x);return u}function c(f){return l(f).filter(x=>x!=="constructor")}function d(f){const u=t.times(f.length,p=>`${p}`),x=new Set(u);a.isBuffer(f)&&(x.add("offset"),x.add("parent")),i.isTypedArray(f)&&(x.add("buffer"),x.add("byteLength"),x.add("byteOffset"));const h=l(f).filter(p=>!x.has(p));return Array.isArray(f)?[...u,...h]:[...u.filter(p=>Object.hasOwn(f,p)),...h]}n.keysIn=o})(P)),P}var _={},ae;function Mt(){return ae||(ae=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const a=Ye(),s=Ue(),r=pe(),i=Ve(),t=Ge();function o(c,d){if(c==null)return!0;switch(typeof d){case"symbol":case"number":case"object":{if(Array.isArray(d))return l(c,d);if(typeof d=="number"?d=i.toKey(d):typeof d=="object"&&(Object.is(d?.valueOf(),-0)?d="-0":d=String(d)),s.isUnsafeProperty(d))return!1;if(c?.[d]===void 0)return!0;try{return delete c[d],!0}catch{return!1}}case"string":{if(c?.[d]===void 0&&r.isDeepKey(d))return l(c,t.toPath(d));if(s.isUnsafeProperty(d))return!1;try{return delete c[d],!0}catch{return!1}}}}function l(c,d){const f=d.length===1?c:a.get(c,d.slice(0,-1)),u=d[d.length-1];if(f?.[u]===void 0)return!0;if(s.isUnsafeProperty(u))return!1;try{return delete f[u],!0}catch{return!1}}n.unset=o})(_)),_}var q={},se;function Dt(){return se||(se=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const a=dt();function s(r){const i=[];for(;r;)i.push(...a.getSymbols(r)),r=Object.getPrototypeOf(r);return i}n.getSymbolsIn=s})(q)),q}var $={},ie;function Rt(){return ie||(ie=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const a=he();function s(r,i=1){const t=[],o=Math.floor(i);if(!a.isArrayLike(r))return t;const l=(c,d)=>{for(let f=0;f<c.length;f++){const u=c[f];d<o&&(Array.isArray(u)||u?.[Symbol.isConcatSpreadable]||u!==null&&typeof u=="object"&&Object.prototype.toString.call(u)==="[object Arguments]")?Array.isArray(u)?l(u,d+1):l(Array.from(u),d+1):t.push(u)}};return l(Array.from(r),0),t}n.flatten=s})($)),$}var oe;function Pt(){return oe||(oe=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const a=ut(),s=Ot(),r=Mt(),i=Dt(),t=pe(),o=Rt(),l=ft();function c(x,...h){if(x==null)return{};h=o.flatten(h);const p=d(x,h);for(let g=0;g<h.length;g++){let v=h[g];switch(typeof v){case"object":{Array.isArray(v)||(v=Array.from(v));for(let b=0;b<v.length;b++){const j=v[b];r.unset(p,j)}break}case"string":case"symbol":case"number":{r.unset(p,v);break}}}return p}function d(x,h){return h.some(g=>Array.isArray(g)||t.isDeepKey(g))?u(x):f(x)}function f(x){const h={},p=[...s.keysIn(x),...i.getSymbolsIn(x)];for(let g=0;g<p.length;g++){const v=p[g];h[v]=x[v]}return h}function u(x){const h={},p=[...s.keysIn(x),...i.getSymbolsIn(x)];for(let g=0;g<p.length;g++){const v=p[g];h[v]=a.cloneDeepWith(x[v],b=>{if(!l.isPlainObject(b))return b})}return h}n.omit=c})(R)),R}var G,le;function Kt(){return le||(le=1,G=Pt().omit),G}var Wt=Kt();const Ht=Le(Wt);var Bt=["width","height","className","style","children","type"];function Ft(n,a){if(n==null)return{};var s,r,i=_t(n,a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);for(r=0;r<t.length;r++)s=t[r],a.indexOf(s)===-1&&{}.propertyIsEnumerable.call(n,s)&&(i[s]=n[s])}return i}function _t(n,a){if(n==null)return{};var s={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(a.indexOf(r)!==-1)continue;s[r]=n[r]}return s}function N(){return N=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)({}).hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},N.apply(null,arguments)}function ce(n,a){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);a&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,r)}return s}function y(n){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?ce(Object(s),!0).forEach(function(r){S(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):ce(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}function S(n,a,s){return(a=qt(a))in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,n}function qt(n){var a=$t(n,"string");return typeof a=="symbol"?a:a+""}function $t(n,a){if(typeof n!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}var Y="value";function Gt(n){return n!=null&&typeof n=="object"&&"x"in n&&"y"in n&&"width"in n&&"height"in n&&typeof n.x=="number"&&typeof n.y=="number"&&typeof n.width=="number"&&typeof n.height=="number"}var Ne=(n,a)=>{if(!(!n||!a))return ge(n,a)},Ut=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"".concat(s,"children[").concat(a,"]")},Vt={chartName:"Treemap",defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],tooltipPayloadSearcher:Ne,eventEmitter:void 0},A=n=>{var{depth:a,node:s,index:r,dataKey:i,nameKey:t,nestedActiveTooltipIndex:o}=n,l=a===0?"":Ut(r,o),{children:c}=s,d=a+1,f=c&&c.length?c.map((p,g)=>A({depth:d,node:p,index:g,dataKey:i,nameKey:t,nestedActiveTooltipIndex:l})):null,u;if(f&&f.length)u=f.reduce((p,g)=>p+g.value,0);else{var x=s[i],h=typeof x=="number"?x:0;u=ve(h)||h<=0?0:h}return y(y({},s),{},{children:f,name:at(s,t,""),[Y]:u,depth:a,index:r,tooltipIndex:l})},Yt=n=>({x:n.x,y:n.y,width:n.width,height:n.height}),Jt=(n,a)=>{var s=a<0?0:a;return n.map(r=>{var i=r[Y]*s;return y(y({},r),{},{area:ve(i)||i<=0?0:i})})},Xt=(n,a,s)=>{var r=a*a,i=n.area*n.area,{min:t,max:o}=n.reduce((l,c)=>({min:Math.min(l.min,c.area),max:Math.max(l.max,c.area)}),{min:1/0,max:0});return i?Math.max(r*o*s/i,i/(r*t*s)):1/0},Zt=(n,a,s,r)=>{var i=a?Math.round(n.area/a):0;(r||i>s.height)&&(i=s.height);for(var t=s.x,o,l=0,c=n.length;l<c;l++)o=n[l],o!=null&&(o.x=t,o.y=s.y,o.height=i,o.width=Math.min(i?Math.round(o.area/i):0,s.x+s.width-t),t+=o.width);return o!=null&&(o.width+=s.x+s.width-t),y(y({},s),{},{y:s.y+i,height:s.height-i})},Qt=(n,a,s,r)=>{var i=a?Math.round(n.area/a):0;(r||i>s.width)&&(i=s.width);for(var t=s.y,o,l=0,c=n.length;l<c;l++)o=n[l],o!=null&&(o.x=s.x,o.y=t,o.width=i,o.height=Math.min(i?Math.round(o.area/i):0,s.y+s.height-t),t+=o.height);return o&&(o.height+=s.y+s.height-t),y(y({},s),{},{x:s.x+i,width:s.width-i})},de=(n,a,s,r)=>a===s.width?Zt(n,a,s,r):Qt(n,a,s,r),L=(n,a)=>{var{children:s}=n;if(s&&s.length){var r=Yt(n),i=[],t=1/0,o,l,c=Math.min(r.width,r.height),d=Jt(s,r.width*r.height/n[Y]),f=d.slice();for(i.area=0;f.length>0;)if([o]=f,o!=null)if(i.push(o),i.area+=o.area,l=Xt(i,c,a),l<=t)f.shift(),t=l;else{var u,x;i.area-=(u=(x=i.pop())===null||x===void 0?void 0:x.area)!==null&&u!==void 0?u:0,r=de(i,c,r,!1),c=Math.min(r.width,r.height),i.length=i.area=0,t=1/0}return i.length&&(r=de(i,c,r,!0),i.length=i.area=0),y(y({},n),{},{children:d.map(h=>L(h,a))})}return n},V={aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",nameKey:"name",type:"flat",isAnimationActive:"auto",isUpdateAnimationActive:"auto",animationBegin:0,animationDuration:1500,animationEasing:"linear"},zt={isAnimationFinished:!1,formatRoot:null,currentRoot:void 0,nestIndex:[],prevAspectRatio:V.aspectRatio,prevDataKey:V.dataKey};function er(n){var{content:a,nodeProps:s,type:r,colorPanel:i,onMouseEnter:t,onMouseLeave:o,onClick:l}=n;if(m.isValidElement(a))return m.createElement(O,{onMouseEnter:t,onMouseLeave:o,onClick:l},m.cloneElement(a,s));if(typeof a=="function")return m.createElement(O,{onMouseEnter:t,onMouseLeave:o,onClick:l},a(s));var{x:c,y:d,width:f,height:u,index:x}=s,h=null;f>10&&u>10&&s.children&&r==="nest"&&(h=m.createElement(vt,{points:[{x:c+2,y:d+u/2},{x:c+6,y:d+u/2+3},{x:c+2,y:d+u/2+6}]}));var p=null,g=it(s.name);f>20&&u>20&&g.width<f&&g.height<u&&(p=m.createElement("text",{x:c+8,y:d+u/2+7,fontSize:14},s.name));var v=i||ot;return m.createElement("g",null,m.createElement(mt,N({fill:s.depth<2?v[x%v.length]:"rgba(255,255,255,0)",stroke:"#fff"},Ht(s,["children"]),{onMouseEnter:t,onMouseLeave:o,onClick:l,"data-recharts-item-index":s.tooltipIndex})),h,p)}function tr(n){var a=ye(),s={x:n.nodeProps.x+n.nodeProps.width/2,y:n.nodeProps.y+n.nodeProps.height/2},r=()=>{a(be({activeIndex:n.nodeProps.tooltipIndex,activeDataKey:n.dataKey,activeCoordinate:s,activeGraphicalItemId:n.id}))},i=()=>{},t=()=>{a(lt({activeIndex:n.nodeProps.tooltipIndex,activeDataKey:n.dataKey,activeCoordinate:s,activeGraphicalItemId:n.id}))};return m.createElement(er,N({},n,{onMouseEnter:r,onMouseLeave:i,onClick:t}))}var rr=m.memo(n=>{var{dataKey:a,nameKey:s,stroke:r,fill:i,currentRoot:t,id:o}=n,l={dataDefinedOnItem:t,getPosition:xe,settings:{stroke:r,strokeWidth:void 0,fill:i,dataKey:a,nameKey:s,name:void 0,hide:!1,type:void 0,color:i,unit:"",graphicalItemId:o}};return m.createElement(st,{tooltipEntrySettings:l})}),nr={top:0,right:0,bottom:0,left:0};function ar(n){var{content:a,nodeProps:s,isLeaf:r,treemapProps:i,onNestClick:t}=n,{id:o,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:f,isUpdateAnimationActive:u,type:x,colorPanel:h,dataKey:p,onAnimationStart:g,onAnimationEnd:v,onMouseEnter:b,onClick:j,onMouseLeave:E}=i,{width:C,height:w,x:D,y:J}=s,Ie=-D-C,Se=0,Ce=I=>{(r||x==="nest")&&typeof b=="function"&&b(s,I)},we=I=>{(r||x==="nest")&&typeof E=="function"&&E(s,I)},Te=()=>{x==="nest"&&t(s),(r||x==="nest")&&typeof j=="function"&&j(s)},ke=m.useCallback(()=>{typeof v=="function"&&v()},[v]),Ae=m.useCallback(()=>{typeof g=="function"&&g()},[g]);return m.createElement(Ct,{animationId:"treemap-".concat(s.tooltipIndex),from:"translate(".concat(Ie,"px, ").concat(Se,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:c,easing:f,isActive:l,duration:d,onAnimationStart:Ae,onAnimationEnd:ke},I=>m.createElement(O,{onMouseEnter:Ce,onMouseLeave:we,onClick:Te,style:y(y({},I),{},{transformOrigin:"".concat(D," ").concat(J)})},m.createElement(tr,{id:o,content:a,dataKey:p,nodeProps:y(y({},s),{},{isAnimationActive:l,isUpdateAnimationActive:!u,width:C,height:w,x:D,y:J}),type:x,colorPanel:h})))}class Ee extends m.PureComponent{constructor(){super(...arguments),S(this,"state",y({},zt)),S(this,"handleClick",a=>{var{onClick:s,type:r}=this.props;if(r==="nest"&&a.children){var{width:i,height:t,dataKey:o,nameKey:l,aspectRatio:c}=this.props,d=A({depth:0,node:y(y({},a),{},{x:0,y:0,width:i,height:t}),index:0,dataKey:o,nameKey:l,nestedActiveTooltipIndex:a.tooltipIndex}),f=L(d,c),{nestIndex:u}=this.state;u.push(a),this.setState({formatRoot:f,currentRoot:d,nestIndex:u})}s&&s(a)}),S(this,"handleTouchMove",a=>{var s=a.touches[0];if(s!=null){var r=document.elementFromPoint(s.clientX,s.clientY);if(!(!r||!r.getAttribute||this.state.formatRoot==null)){var i=r.getAttribute("data-recharts-item-index"),t=Ne(this.state.formatRoot,i);if(Gt(t)){var{dataKey:o,dispatch:l}=this.props,c={x:t.x+t.width/2,y:t.y+t.height/2};l(be({activeIndex:i,activeDataKey:o,activeCoordinate:c,activeGraphicalItemId:this.props.id}))}}}})}static getDerivedStateFromProps(a,s){if(a.data!==s.prevData||a.type!==s.prevType||a.width!==s.prevWidth||a.height!==s.prevHeight||a.dataKey!==s.prevDataKey||a.aspectRatio!==s.prevAspectRatio){var r=A({depth:0,node:{children:a.data,x:0,y:0,width:a.width,height:a.height},index:0,dataKey:a.dataKey,nameKey:a.nameKey}),i=L(r,a.aspectRatio);return y(y({},s),{},{formatRoot:i,currentRoot:r,nestIndex:[r],prevAspectRatio:a.aspectRatio,prevData:a.data,prevWidth:a.width,prevHeight:a.height,prevDataKey:a.dataKey,prevType:a.type})}return null}handleNestIndex(a,s){var{nestIndex:r}=this.state,{width:i,height:t,dataKey:o,nameKey:l,aspectRatio:c}=this.props,d=A({depth:0,node:y(y({},a),{},{x:0,y:0,width:i,height:t}),index:0,dataKey:o,nameKey:l,nestedActiveTooltipIndex:a.tooltipIndex}),f=L(d,c);r=r.slice(0,s+1),this.setState({formatRoot:f,currentRoot:a,nestIndex:r})}renderNode(a,s){var{content:r,type:i}=this.props,t=y(y(y({},Z(this.props)),s),{},{root:a}),o=!s.children||!s.children.length,{currentRoot:l}=this.state,c=(l?.children||[]).filter(d=>d.depth===s.depth&&d.name===s.name);return!c.length&&a.depth&&i==="nest"?null:m.createElement(O,{key:"recharts-treemap-node-".concat(t.x,"-").concat(t.y,"-").concat(t.name),className:"recharts-treemap-depth-".concat(s.depth)},m.createElement(ar,{isLeaf:o,content:r,nodeProps:t,treemapProps:this.props,onNestClick:this.handleClick}),s.children&&s.children.length?s.children.map(d=>this.renderNode(s,d)):null)}renderAllNodes(){var{formatRoot:a}=this.state;return a?this.renderNode(a,a):null}renderNestIndex(){var{nameKey:a,nestIndexContent:s}=this.props,{nestIndex:r}=this.state;return m.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},r.map((i,t)=>{var o=ge(i,a,"root"),l=typeof o=="string"?o:"root",c;return m.isValidElement(s)&&(c=m.cloneElement(s,i,t)),typeof s=="function"?c=s(i,t):c=l,m.createElement("div",{onClick:this.handleNestIndex.bind(this,i,t),key:"nest-index-".concat(rt()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},c)}))}render(){var a=this.props,{width:s,height:r,className:i,style:t,children:o,type:l}=a,c=Ft(a,Bt),d=Z(c);return m.createElement(m.Fragment,null,m.createElement(rr,{dataKey:this.props.dataKey,nameKey:this.props.nameKey,stroke:this.props.stroke,fill:this.props.fill,currentRoot:this.state.currentRoot,id:this.props.id}),m.createElement(nt,N({},d,{width:s,height:l==="nest"?r-30:r,onTouchMove:this.handleTouchMove}),this.renderAllNodes(),o),l==="nest"&&this.renderNestIndex())}}S(Ee,"displayName","Treemap");function sr(n){var a=ye(),s=ze(),r=et();if(!X(s)||!X(r))return null;var{id:i}=n;return m.createElement(tt,{id:i,type:"treemap"},t=>m.createElement(Ee,N({},n,{id:t,width:s,height:r,dispatch:a})))}function ir(n){var a,s=me(n,V),{className:r,style:i,width:t,height:o}=s,[l,c]=m.useState(null);return m.createElement(Je,{preloadedState:{options:Vt},reduxStoreName:(a=s.className)!==null&&a!==void 0?a:"Treemap"},m.createElement(Xe,{margin:nr}),m.createElement(Ze,{dispatchTouchEvents:!1,className:r,style:i,width:t,height:o,responsive:!1,ref:d=>{l==null&&d!=null&&c(d)},onMouseEnter:void 0,onMouseLeave:void 0,onClick:void 0,onMouseMove:void 0,onMouseDown:void 0,onMouseUp:void 0,onContextMenu:void 0,onDoubleClick:void 0,onTouchStart:void 0,onTouchMove:void 0,onTouchEnd:void 0},m.createElement(Qe.Provider,{value:l},m.createElement(sr,s))))}const T=[{name:"NORTH DELHI",shortName:"NORTH",lat:[28.68,28.76],lng:[77.18,77.26],cx:150,cy:52},{name:"NORTH WEST",shortName:"NW",lat:[28.68,28.76],lng:[77.04,77.18],cx:75,cy:60},{name:"NORTH EAST",shortName:"NE",lat:[28.68,28.76],lng:[77.26,77.34],cx:228,cy:55},{name:"CENTRAL",shortName:"CTR",lat:[28.62,28.68],lng:[77.18,77.28],cx:155,cy:128},{name:"WEST DELHI",shortName:"WEST",lat:[28.6,28.7],lng:[77.02,77.14],cx:55,cy:132},{name:"EAST DELHI",shortName:"EAST",lat:[28.6,28.68],lng:[77.28,77.38],cx:245,cy:122},{name:"NEW DELHI",shortName:"N.DLI",lat:[28.58,28.64],lng:[77.18,77.26],cx:148,cy:188},{name:"SOUTH WEST",shortName:"SW",lat:[28.48,28.58],lng:[77.02,77.16],cx:68,cy:258},{name:"SOUTH DELHI",shortName:"SOUTH",lat:[28.48,28.58],lng:[77.16,77.26],cx:155,cy:260},{name:"SOUTH EAST",shortName:"SE",lat:[28.48,28.6],lng:[77.26,77.36],cx:240,cy:248},{name:"SHAHDARA",shortName:"SHD",lat:[28.66,28.72],lng:[77.28,77.34],cx:235,cy:85},{name:"DWARKA",shortName:"DWK",lat:[28.56,28.62],lng:[77.02,77.1],cx:42,cy:192}],U=[[0,1],[0,2],[0,3],[1,4],[2,5],[2,10],[3,4],[3,5],[3,6],[4,11],[4,7],[5,9],[6,7],[6,8],[6,9],[7,8],[8,9],[10,5]];function or(n,a){if(a===0)return"#0a1a0a";const s=n/a;return s===0?"#0a1a0a":s<.15?"#002200":s<.3?"#004400":s<.5?"#886600":s<.7?"#bb4400":s<.85?"#dd2200":"#ff003c"}function lr(n){return n===0?"CLEAR":n<.2?"LOW":n<.4?"MODERATE":n<.6?"ELEVATED":n<.8?"HIGH":"CRITICAL"}function cr({data:n}){const a=m.useMemo(()=>{const t={},o={};T.forEach(c=>{t[c.name]=0,o[c.name]={}}),n.forEach(c=>{const{lat:d,lng:f}=c.location;for(const u of T)if(d>=u.lat[0]&&d<u.lat[1]&&f>=u.lng[0]&&f<u.lng[1]){t[u.name]++,o[u.name][c.type]=(o[u.name][c.type]||0)+1;break}});const l=Math.max(...Object.values(t),1);return T.map(c=>{const d=t[c.name],f=d/l,u=Object.entries(o[c.name]).sort((x,h)=>h[1]-x[1])[0];return{...c,count:d,ratio:f,color:or(d,l),threat:lr(f),topCrime:u?u[0]:null,radius:16+d*1.2,glowRadius:22+d*1.8}})},[n]),s=n.length,r=a.reduce((t,o)=>t.count>o.count?t:o,a[0]),i=a.filter(t=>t.count>0).length;return e.jsxs("div",{className:"bg-black border border-danger/10 p-5 corner-borders relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20",style:{background:"repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(255,0,60,0.02) 3px, rgba(255,0,60,0.02) 6px)"}}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-danger/30 to-transparent"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-danger/15 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-2 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-mono text-danger tracking-wider",children:[">"," THREAT_MAP // DELHI NCR"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:"GEOSPATIAL CRIME DENSITY NETWORK"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-danger rounded-full status-dot"}),e.jsx("span",{className:"text-[7px] font-mono text-danger tracking-widest",children:"SCANNING"})]}),e.jsxs("span",{className:"text-[9px] font-mono text-gray-500",children:[e.jsx(M,{value:s})," ",e.jsx("span",{className:"text-[7px] text-gray-700",children:"CASES"})]})]})]}),e.jsxs("svg",{viewBox:"0 0 300 320",className:"w-full h-auto relative z-10",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"hm-glow",x:"-80%",y:"-80%",width:"260%",height:"260%",children:[e.jsx("feGaussianBlur",{stdDeviation:"8",result:"g1"}),e.jsx("feGaussianBlur",{stdDeviation:"3",result:"g2"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"g1"}),e.jsx("feMergeNode",{in:"g2"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsx("filter",{id:"hm-soft",x:"-60%",y:"-60%",width:"220%",height:"220%",children:e.jsx("feGaussianBlur",{stdDeviation:"12"})}),e.jsxs("filter",{id:"hm-text",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"g"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"g"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("linearGradient",{id:"radar-line",x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#ff003c",stopOpacity:"0"}),e.jsx("stop",{offset:"50%",stopColor:"#ff003c",stopOpacity:"0.6"}),e.jsx("stop",{offset:"100%",stopColor:"#ff003c",stopOpacity:"0"})]}),e.jsxs("radialGradient",{id:"map-vignette",cx:"50%",cy:"50%",r:"55%",children:[e.jsx("stop",{offset:"60%",stopColor:"#ff003c",stopOpacity:"0.03"}),e.jsx("stop",{offset:"100%",stopColor:"#000",stopOpacity:"0"})]})]}),e.jsxs("g",{stroke:"#0d0d0d",strokeWidth:"0.3",opacity:"0.6",children:[Array.from({length:16},(t,o)=>e.jsx("line",{x1:o*20,y1:"0",x2:o*20,y2:"320"},`vg${o}`)),Array.from({length:17},(t,o)=>e.jsx("line",{x1:"0",y1:o*20,x2:"300",y2:o*20},`hg${o}`))]}),e.jsx("text",{x:"4",y:"10",fill:"#1a1a1a",fontSize:"5",fontFamily:"JetBrains Mono",children:"28.76°N"}),e.jsx("text",{x:"4",y:"310",fill:"#1a1a1a",fontSize:"5",fontFamily:"JetBrains Mono",children:"28.48°N"}),e.jsx("text",{x:"256",y:"318",fill:"#1a1a1a",fontSize:"5",fontFamily:"JetBrains Mono",children:"77.36°E"}),e.jsx("text",{x:"4",y:"318",fill:"#1a1a1a",fontSize:"5",fontFamily:"JetBrains Mono",children:"77.02°E"}),e.jsx("path",{d:"M78,18 L105,10 L135,8 L170,9 L200,12 L230,18 L252,30 L268,55 L275,85 L278,110 L275,140 L270,168 L262,195 L252,222 L240,248 L225,268 L205,282 L180,292 L158,296 L135,294 L112,288 L90,276 L72,260 L56,240 L44,215 L36,190 L32,165 L30,138 L32,112 L36,88 L44,68 L55,48 L68,32 Z",fill:"none",stroke:"#ff003c",strokeWidth:"0.8",strokeOpacity:"0.12"}),e.jsx("path",{d:"M78,18 L105,10 L135,8 L170,9 L200,12 L230,18 L252,30 L268,55 L275,85 L278,110 L275,140 L270,168 L262,195 L252,222 L240,248 L225,268 L205,282 L180,292 L158,296 L135,294 L112,288 L90,276 L72,260 L56,240 L44,215 L36,190 L32,165 L30,138 L32,112 L36,88 L44,68 L55,48 L68,32 Z",fill:"url(#map-vignette)",stroke:"#ff003c",strokeWidth:"0.4",strokeOpacity:"0.25",strokeDasharray:"8 4 2 4"}),U.map(([t,o])=>{const l=a[t],c=a[o],d=l.count+c.count,f=Math.max(...U.map(([h,p])=>a[h].count+a[p].count),1),u=d/f,x=u>.6?"#ff003c":u>.3?"#ff660066":"#1a2a1a";return e.jsx("line",{x1:l.cx,y1:l.cy,x2:c.cx,y2:c.cy,stroke:x,strokeWidth:.4+u*1.2,strokeOpacity:.15+u*.4,strokeDasharray:d>0?"none":"3 6"},`link-${t}-${o}`)}),U.filter(([t,o])=>a[t].count+a[o].count>3).map(([t,o],l)=>{const c=a[t],d=a[o];return e.jsx("circle",{r:"1.2",fill:"#ff003c",opacity:"0.7",children:e.jsx("animateMotion",{dur:`${2.5+l*.3}s`,repeatCount:"indefinite",path:`M${c.cx},${c.cy} L${d.cx},${d.cy}`})},`particle-${t}-${o}`)}),a.map(t=>e.jsxs("g",{children:[t.count>0&&e.jsx("circle",{cx:t.cx,cy:t.cy,r:t.glowRadius,fill:t.color,opacity:.06+t.ratio*.12,filter:"url(#hm-soft)"}),t.count>3&&e.jsxs(e.Fragment,{children:[e.jsx("circle",{cx:t.cx,cy:t.cy,r:t.radius+4,fill:"none",stroke:t.color,strokeWidth:"0.6",opacity:"0.4",style:{animation:`danger-aura ${Math.max(1.8-t.ratio*.8,.6)}s ease-in-out infinite`,transformOrigin:`${t.cx}px ${t.cy}px`}}),e.jsx("circle",{cx:t.cx,cy:t.cy,r:t.radius+8,fill:"none",stroke:t.color,strokeWidth:"0.3",opacity:"0.2",style:{animation:`danger-aura ${Math.max(2.2-t.ratio*.6,.8)}s ease-in-out infinite`,animationDelay:"0.4s",transformOrigin:`${t.cx}px ${t.cy}px`}})]}),t.count>0?e.jsx("polygon",{points:ue(t.cx,t.cy,t.radius*.75),fill:t.color,fillOpacity:.08+t.ratio*.15,stroke:t.color,strokeWidth:.6+t.ratio,strokeOpacity:.4+t.ratio*.5,filter:"url(#hm-glow)"}):e.jsx("polygon",{points:ue(t.cx,t.cy,10),fill:"none",stroke:"#111",strokeWidth:"0.4",strokeDasharray:"2 3"}),t.count>2&&e.jsx("polygon",{points:dr(t.cx,t.cy,t.radius*.35),fill:t.color,fillOpacity:"0.15",stroke:t.color,strokeWidth:"0.4",strokeOpacity:"0.6"}),e.jsx("text",{x:t.cx,y:t.cy+1,fill:t.count>0?"#fff":"#222",fontSize:t.count>5?"11":"9",fontFamily:"Orbitron",textAnchor:"middle",dominantBaseline:"middle",fontWeight:"bold",filter:t.count>0?"url(#hm-text)":void 0,children:t.count}),e.jsx("text",{x:t.cx,y:t.cy+t.radius*.75+10,fill:t.count>0?t.color:"#1a1a1a",fontSize:"5.5",fontFamily:"JetBrains Mono",textAnchor:"middle",opacity:t.count>0?.8:.3,letterSpacing:"0.5",children:t.shortName}),t.count>0&&e.jsx("text",{x:t.cx,y:t.cy-t.radius*.75-5,fill:t.color,fontSize:"4",fontFamily:"JetBrains Mono",textAnchor:"middle",opacity:"0.5",letterSpacing:"1",children:t.threat}),t.topCrime&&t.count>1&&e.jsx("text",{x:t.cx,y:t.cy+t.radius*.75+17,fill:"#333",fontSize:"4",fontFamily:"JetBrains Mono",textAnchor:"middle",letterSpacing:"0.3",children:t.topCrime.toUpperCase()}),t.name===r.name&&t.count>0&&e.jsxs("g",{stroke:"#ff003c",strokeWidth:"0.4",opacity:"0.5",children:[e.jsx("line",{x1:t.cx-t.radius-6,y1:t.cy,x2:t.cx-t.radius+2,y2:t.cy}),e.jsx("line",{x1:t.cx+t.radius-2,y1:t.cy,x2:t.cx+t.radius+6,y2:t.cy}),e.jsx("line",{x1:t.cx,y1:t.cy-t.radius-6,x2:t.cx,y2:t.cy-t.radius+2}),e.jsx("line",{x1:t.cx,y1:t.cy+t.radius-2,x2:t.cx,y2:t.cy+t.radius+6})]})]},t.name)),e.jsx("rect",{x:"0",y:"0",width:"300",height:"2",fill:"url(#radar-line)",opacity:"0.4",children:e.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,320;0,0",dur:"6s",repeatCount:"indefinite"})}),e.jsxs("g",{stroke:"#ff003c",strokeWidth:"0.6",opacity:"0.3",children:[e.jsx("polyline",{points:"5,15 5,5 15,5",fill:"none"}),e.jsx("polyline",{points:"285,5 295,5 295,15",fill:"none"}),e.jsx("polyline",{points:"5,305 5,315 15,315",fill:"none"}),e.jsx("polyline",{points:"285,315 295,315 295,305",fill:"none"})]})]}),e.jsxs("div",{className:"relative z-10 mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-danger status-dot"}),e.jsxs("span",{className:"text-[8px] font-mono text-gray-500 tracking-wider",children:["HOTSPOT: ",e.jsx("span",{className:"text-danger font-bold",children:r.name})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-[7px] font-mono text-gray-600",children:[i,"/",T.length," ZONES ACTIVE"]}),e.jsxs("span",{className:"text-[8px] font-mono text-danger font-bold",children:[r.count," CASES"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 px-1",children:[e.jsx("span",{className:"text-[6px] font-mono text-gray-700 w-10 tracking-wider",children:"THREAT"}),e.jsx("div",{className:"flex-1 flex gap-px h-1.5",children:a.slice().sort((t,o)=>o.count-t.count).map(t=>e.jsx("div",{className:"flex-1 transition-colors duration-700",style:{backgroundColor:t.count>0?t.color:"#0a0a0a",boxShadow:t.count>3?`0 0 4px ${t.color}50`:"none"}},t.name))}),e.jsx("span",{className:"text-[6px] font-mono text-gray-700 w-8 text-right tracking-wider",children:"INDEX"})]}),e.jsx("div",{className:"flex items-center justify-center gap-2",children:[{c:"#002200",l:"CLEAR"},{c:"#004400",l:"LOW"},{c:"#886600",l:"ELEV"},{c:"#bb4400",l:"HIGH"},{c:"#ff003c",l:"CRIT"}].map(t=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{width:"8",height:"8",viewBox:"0 0 8 8",children:e.jsx("polygon",{points:"4,0.5 7.5,4 4,7.5 0.5,4",fill:t.c,stroke:t.c,strokeWidth:"0.5",opacity:"0.8"})}),e.jsx("span",{className:"text-[5.5px] font-mono text-gray-600 tracking-wider",children:t.l})]},t.l))})]})]})}function ue(n,a,s){return Array.from({length:6},(r,i)=>{const t=Math.PI/3*i-Math.PI/6;return`${n+s*Math.cos(t)},${a+s*Math.sin(t)}`}).join(" ")}function dr(n,a,s){return`${n},${a-s} ${n+s},${a} ${n},${a+s} ${n-s},${a}`}function k(n){switch(n?.toLowerCase()){case"critical":return"#ff003c";case"high":return"#ff6600";case"medium":return"#ffb800";case"low":return"#00ff41";default:return"#3a5a3a"}}function ur(n){switch(n){case"reported":return"#00ff41";case"investigating":return"#ffb800";case"resolved":return"#00d4ff";case"closed":return"#3a5a3a";default:return"#3a5a3a"}}function fr({data:n}){const a=m.useMemo(()=>{const r={},i={},t={};n.forEach(f=>{r[f.severity]=(r[f.severity]||0)+1,i[f.status]=(i[f.status]||0)+1,t[f.type]=(t[f.type]||0)+1});const o=Object.entries(t).sort((f,u)=>u[1]-f[1])[0],l=(i.reported||0)+(i.investigating||0),c=(i.resolved||0)+(i.closed||0),d=(r.critical||0)+(r.high||0);return{severities:r,statuses:i,types:t,topType:o,activeCases:l,resolvedCases:c,criticalCases:d}},[n]),s=[{label:"TOTAL CASES",value:n.length,color:"#ff003c"},{label:"ACTIVE",value:a.activeCases,color:"#ffb800"},{label:"RESOLVED",value:a.resolvedCases,color:"#00d4ff"},{label:"HIGH/CRITICAL",value:a.criticalCases,color:"#ff6600"}];return e.jsxs("div",{className:"bg-gray-950 border border-danger/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-danger/20 to-transparent"}),e.jsxs("h3",{className:"text-[10px] font-mono text-danger tracking-wider mb-4",children:[">"," CRIME_OVERVIEW // LIVE STATISTICS"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:s.map(r=>e.jsxs("div",{className:"border px-3 py-2.5 relative overflow-hidden",style:{borderColor:r.color+"25",backgroundColor:r.color+"06"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-0.5 h-full",style:{backgroundColor:r.color+"60"}}),e.jsx("p",{className:"text-[7px] font-mono tracking-wider text-gray-600 mb-0.5",children:r.label}),e.jsx("p",{className:"text-lg font-bold font-[Orbitron] tracking-wider",style:{color:r.color,textShadow:`0 0 10px ${r.color}40`},children:e.jsx(M,{value:r.value})})]},r.label))}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-[8px] font-mono text-gray-600 tracking-wider mb-1.5",children:"SEVERITY DISTRIBUTION"}),e.jsx("div",{className:"flex gap-0.5 h-2.5 overflow-hidden",children:["critical","high","medium","low"].map(r=>{const i=a.severities[r]||0,t=n.length>0?i/n.length*100:0;return e.jsx("div",{className:"relative transition-all duration-700",style:{width:`${Math.max(t,2)}%`,backgroundColor:k(r),boxShadow:`0 0 8px ${k(r)}40`}},r)})}),e.jsx("div",{className:"flex justify-between mt-1",children:["critical","high","medium","low"].map(r=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5",style:{backgroundColor:k(r)}}),e.jsxs("span",{className:"text-[6px] font-mono",style:{color:k(r)+"cc"},children:[r.toUpperCase()," (",a.severities[r]||0,")"]})]},r))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-[8px] font-mono text-gray-600 tracking-wider mb-1.5",children:"STATUS PIPELINE"}),e.jsx("div",{className:"flex items-center gap-1",children:["reported","investigating","resolved","closed"].map((r,i)=>{const t=a.statuses[r]||0,o=ur(r);return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full h-1.5 mb-1",style:{backgroundColor:o+"30"},children:e.jsx("div",{className:"h-full transition-all duration-700",style:{width:`${n.length>0?t/n.length*100:0}%`,backgroundColor:o}})}),e.jsx("span",{className:"text-[7px] font-mono font-bold",style:{color:o},children:t}),e.jsx("span",{className:"text-[6px] font-mono text-gray-700",children:r==="investigating"?"INVEST.":r.toUpperCase()}),i<3&&e.jsx("span",{className:"text-[8px] text-gray-800 absolute",style:{right:"-4px"},children:"→"})]},r)})})]}),a.topType&&e.jsxs("div",{className:"border border-danger/10 px-3 py-2 flex items-center justify-between",style:{backgroundColor:"#ff003c06"},children:[e.jsx("span",{className:"text-[8px] font-mono text-gray-600 tracking-wider",children:"MOST COMMON"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-mono font-bold text-danger tracking-wider",children:a.topType[0].toUpperCase()}),e.jsxs("span",{className:"text-[8px] font-mono text-gray-500",children:["(",a.topType[1]," cases)"]})]})]})]})}function mr(n,a){return n>=28.68&&a<77.18?"North West Delhi":n>=28.68&&a>=77.26?"North East Delhi":n>=28.68?"North Delhi":n>=28.62&&n<28.68&&a>=77.18&&a<77.28?"Central Delhi":n>=28.6&&a<77.14?"West Delhi":n>=28.6&&a>=77.28?"East Delhi":n>=28.58&&n<28.64&&a>=77.18&&a<77.26?"New Delhi":n<28.58&&a<77.16?"South West Delhi":n<28.58&&a>=77.26?"South East Delhi":n<28.58?"South Delhi":"Delhi NCR"}function xr(n){return n===0?"#ff003c":n===1?"#ff6600":n===2?"#ffb800":n===3?"#00d4ff":"#00ff41"}function hr({data:n}){const a=m.useMemo(()=>{const r={};return n.forEach(i=>{const t=mr(i.location.lat,i.location.lng);r[t]||(r[t]={total:0,types:{},severities:{}}),r[t].total++,r[t].types[i.type]=(r[t].types[i.type]||0)+1,r[t].severities[i.severity]=(r[t].severities[i.severity]||0)+1}),Object.entries(r).map(([i,t])=>{const o=Object.entries(t.types).sort((l,c)=>c[1]-l[1])[0];return{name:i,total:t.total,topCrime:o?o[0]:"N/A",critical:(t.severities.critical||0)+(t.severities.high||0)}}).sort((i,t)=>t.total-i.total)},[n]),s=a[0]?.total||1;return e.jsxs("div",{className:"bg-gray-950 border border-danger/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-danger/20 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-[10px] font-mono text-danger tracking-wider",children:[">"," AREA_RANKING // CRIME DENSITY INDEX"]}),e.jsxs("span",{className:"text-[8px] font-mono text-gray-600",children:[a.length," ZONES"]})]}),e.jsx("div",{className:"space-y-1.5 max-h-[320px] overflow-y-auto pr-1",children:a.map((r,i)=>{const t=r.total/s*100,o=xr(i);return e.jsx("div",{className:"group",children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 border-l-2 hover:bg-danger/5 transition-colors",style:{borderLeftColor:o+"60"},children:[e.jsxs("span",{className:"text-[10px] font-mono font-bold w-5 text-right",style:{color:o},children:["#",i+1]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("span",{className:"text-[9px] font-mono text-gray-300 tracking-wider truncate",children:r.name.toUpperCase()}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[7px] font-mono text-gray-600",children:["TOP: ",r.topCrime.toUpperCase()]}),e.jsx("span",{className:"text-[10px] font-mono font-bold tabular-nums",style:{color:o},children:r.total})]})]}),e.jsx("div",{className:"w-full h-1 bg-gray-900 overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-700 ease-out",style:{width:`${t}%`,backgroundColor:o,boxShadow:`0 0 6px ${o}50`}})}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:r.critical>0&&e.jsxs("span",{className:"text-[6px] font-mono text-danger tracking-wider",children:[r.critical," HIGH/CRIT"]})})]})]})},r.name)})})]})}function pr(n){switch(n?.toLowerCase()){case"critical":return"#ff003c";case"high":return"#ff6600";case"medium":return"#ffb800";case"low":return"#00ff41";default:return"#3a5a3a"}}function gr(n,a){return n>=28.68&&a<77.18?"NW DELHI":n>=28.68&&a>=77.26?"NE DELHI":n>=28.68?"N DELHI":n>=28.62&&n<28.68&&a>=77.18&&a<77.28?"CENTRAL":n>=28.6&&a<77.14?"W DELHI":n>=28.6&&a>=77.28?"E DELHI":n>=28.58&&n<28.64&&a>=77.18&&a<77.26?"NEW DELHI":n<28.58&&a<77.16?"SW DELHI":n<28.58&&a>=77.26?"SE DELHI":n<28.58?"S DELHI":"DELHI NCR"}function yr(n){const a=Date.now()-new Date(n).getTime(),s=Math.floor(a/6e4);if(s<60)return`${s}m AGO`;const r=Math.floor(s/60);return r<24?`${r}h AGO`:`${Math.floor(r/24)}d AGO`}function vr({data:n}){const a=m.useMemo(()=>n.slice(0,15),[n]),s=m.useMemo(()=>{const r=n.filter(l=>Date.now()-new Date(l.timestamp).getTime()<864e5),i=n.filter(l=>(l.severity==="critical"||l.severity==="high")&&(l.status==="reported"||l.status==="investigating")),t={};n.forEach(l=>{t[l.type]=(t[l.type]||0)+1});const o=Object.entries(t).sort((l,c)=>c[1]-l[1])[0];return{last24h:r.length,critical:i.length,trending:o}},[n]);return e.jsxs("div",{className:"bg-gray-950 border border-danger/10 p-5 corner-borders relative flex flex-col",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-danger/20 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-mono text-danger tracking-wider",children:[">"," CRIME_LOG // LIVE DISPATCH"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:"REAL-TIME INCIDENT STREAM"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-danger rounded-full status-dot"}),e.jsx("span",{className:"text-[8px] font-mono text-danger tracking-widest",children:"LIVE"})]})]}),e.jsxs("div",{className:"flex gap-1 mb-3",children:[e.jsxs("div",{className:"flex-1 border border-danger/10 bg-danger/5 px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[12px] font-bold font-[Orbitron] text-danger",children:e.jsx(M,{value:s.last24h})}),e.jsx("p",{className:"text-[5.5px] font-mono text-gray-600 tracking-wider",children:"24H REPORTS"})]}),e.jsxs("div",{className:"flex-1 border border-danger/10 bg-danger/5 px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[12px] font-bold font-[Orbitron]",style:{color:s.critical>0?"#ff003c":"#00ff41"},children:e.jsx(M,{value:s.critical})}),e.jsx("p",{className:"text-[5.5px] font-mono text-gray-600 tracking-wider",children:"CRIT ACTIVE"})]}),e.jsxs("div",{className:"flex-1 border border-danger/10 bg-danger/5 px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[9px] font-bold font-mono text-warning truncate",children:s.trending?s.trending[0].toUpperCase():"N/A"}),e.jsx("p",{className:"text-[5.5px] font-mono text-gray-600 tracking-wider",children:"TRENDING"})]})]}),e.jsx("div",{className:"flex-1 max-h-[300px] overflow-y-auto space-y-0.5 pr-1",children:a.length===0?e.jsx("p",{className:"text-[10px] font-mono text-gray-600 text-center py-8 tracking-wider",children:"NO CRIME DATA..."}):a.map((r,i)=>{const t=pr(r.severity),o=gr(r.location.lat,r.location.lng);return e.jsxs("div",{className:"flex items-start gap-2 px-2 py-1.5 hover:bg-danger/5 transition-colors border-l-2 group animate-fade-up",style:{borderLeftColor:t+"60",animationDelay:`${i*30}ms`},children:[e.jsxs("div",{className:"flex flex-col items-center gap-0.5 mt-0.5 shrink-0",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:t,boxShadow:`0 0 6px ${t}60`}}),e.jsx("span",{className:"text-[5px] font-mono tracking-wider",style:{color:t+"99"},children:r.severity?.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:"text-[8px] font-mono text-danger/40",children:["#",r.id]}),e.jsx("span",{className:"text-[9px] font-mono font-bold text-gray-200 tracking-wider truncate",children:r.type.toUpperCase()})]}),e.jsx(Oe,{status:r.status})]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsxs("span",{className:`text-[6.5px] font-mono tracking-wider ${Me(r.severity)}`,children:["[",r.severity?.toUpperCase(),"]"]}),e.jsx("span",{className:"text-[6px] font-mono text-gray-700",children:"|"}),e.jsx("span",{className:"text-[6.5px] font-mono text-gray-500",children:o}),e.jsx("span",{className:"text-[6px] font-mono text-gray-700",children:"|"}),e.jsx("span",{className:"text-[6.5px] font-mono text-gray-600",children:De(r.timestamp)}),e.jsx("span",{className:"text-[6px] font-mono text-danger/50 ml-auto",children:yr(r.timestamp)})]}),e.jsx("div",{className:"w-full h-px mt-1 bg-gray-900 overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:r.severity==="critical"?"100%":r.severity==="high"?"75%":r.severity==="medium"?"50%":"25%",backgroundColor:t,boxShadow:`0 0 3px ${t}`}})})]})]},r.id)})}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-danger/5 flex items-center justify-between",children:[e.jsxs("span",{className:"text-[8px] font-mono text-gray-700 tracking-wider",children:["STREAM ",a.length," / ",n.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:"SORTED: NEWEST"}),e.jsx("div",{className:"flex gap-px",children:[...Array(5)].map((r,i)=>e.jsx("div",{className:"w-0.5 bg-danger/30 transition-all",style:{height:`${4+i*2}px`}},i))})]})]})]})}const br={Theft:"#00ff41",Robbery:"#ff003c",Assault:"#ff6600",Burglary:"#ffb800",Fraud:"#00d4ff",Vandalism:"#9945ff",Murder:"#ff0066",Kidnapping:"#ff4488","Cyber Crime":"#00ffcc",Arson:"#ff3300"};function jr(n){return br[n]||"#3a5a3a"}function Nr({x:n,y:a,width:s,height:r,name:i,value:t,color:o}){return s<30||r<25?null:e.jsxs("g",{children:[e.jsx("rect",{x:n,y:a,width:s,height:r,fill:o,fillOpacity:"0.15",stroke:o,strokeWidth:"1",strokeOpacity:"0.6"}),s>50&&r>35&&e.jsxs(e.Fragment,{children:[e.jsx("text",{x:n+s/2,y:a+r/2-4,fill:o,fontSize:"9",fontFamily:"JetBrains Mono",textAnchor:"middle",fontWeight:"bold",children:i}),e.jsx("text",{x:n+s/2,y:a+r/2+10,fill:o,fontSize:"14",fontFamily:"Orbitron",textAnchor:"middle",fontWeight:"bold",opacity:"0.9",children:t})]})]})}function Er({data:n}){const a={};n.forEach(r=>{a[r.type]=(a[r.type]||0)+1});const s=Object.entries(a).map(([r,i])=>({name:r,value:i,color:jr(r)})).sort((r,i)=>i.value-r.value);return e.jsxs("div",{className:"bg-gray-950 border border-danger/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-danger/20 to-transparent"}),e.jsxs("h3",{className:"text-[10px] font-mono text-danger tracking-wider mb-1",children:[">"," CRIME_TYPES // DISTRIBUTION MATRIX"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider mb-3",children:"SIZE PROPORTIONAL TO CASE COUNT"}),e.jsx(je,{width:"100%",height:280,children:e.jsx(ir,{data:s,dataKey:"value",stroke:"#020a02",animationDuration:1200,animationEasing:"ease-out",content:e.jsx(Nr,{x:0,y:0,width:0,height:0,name:"",value:0,color:""})})}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.map(r=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2",style:{backgroundColor:r.color}}),e.jsx("span",{className:"text-[7px] font-mono",style:{color:r.color+"cc"},children:r.name.toUpperCase()})]},r.name))})]})}function Ir({data:n}){const a={};n.forEach(t=>{const o=t.severity||"unknown";a[o]=(a[o]||0)+1});const s=["low","medium","high","critical"],r={low:"#00ff41",medium:"#ffb800",high:"#ff6600",critical:"#ff003c",unknown:"#3a5a3a"},i=s.filter(t=>a[t]).map(t=>({name:t.toUpperCase(),value:a[t],fill:r[t]||"#3a5a3a"}));return e.jsxs("div",{className:"bg-gray-950 border border-danger/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-danger/20 to-transparent"}),e.jsxs("h3",{className:"text-[10px] font-mono text-danger tracking-wider mb-1",children:[">"," SEVERITY_ANALYSIS // THREAT LEVELS"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider mb-3",children:"CRIME SEVERITY DISTRIBUTION"}),e.jsx(je,{width:"100%",height:280,children:e.jsxs(bt,{data:i,barCategoryGap:"20%",children:[e.jsx(xt,{strokeDasharray:"3 3",stroke:"#0a1a0a"}),e.jsx(ht,{dataKey:"name",stroke:"#1a3a1a",tick:{fill:"#3a5a3a",fontSize:9,fontFamily:"JetBrains Mono"}}),e.jsx(pt,{stroke:"#1a3a1a",tick:{fill:"#3a5a3a",fontSize:9,fontFamily:"JetBrains Mono"}}),e.jsx(gt,{content:e.jsx(yt,{})}),e.jsx(Nt,{wrapperStyle:{fontFamily:"JetBrains Mono",fontSize:"9px"}}),e.jsx(jt,{dataKey:"value",name:"Cases",radius:[2,2,0,0],animationDuration:1500,animationEasing:"ease-out",children:i.map((t,o)=>e.jsx(Et,{fill:t.fill},o))})]})})]})}function Sr({open:n,onClose:a,onSuccess:s}){const[r,i]=m.useState({type:"",lat:"28.6139",lng:"77.2090",severity:"medium",status:"reported"}),[t,o]=m.useState(""),[l,c]=m.useState(!1);if(!n)return null;const d=async u=>{u.preventDefault(),c(!0),o("");try{await Pe.post("/crime",{type:r.type,location:{lat:parseFloat(r.lat),lng:parseFloat(r.lng)},severity:r.severity,status:r.status,timestamp:new Date().toISOString()}),s(),a()}catch(x){o(x.response?.data?.error?.message||"Failed to create report")}finally{c(!1)}},f=(u,x)=>i(h=>({...h,[u]:x}));return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black/80",onClick:a}),e.jsxs("div",{className:"relative z-10 w-full max-w-md bg-gray-950 border border-danger/10 p-6 shadow-[0_0_30px_rgba(255,0,60,0.05)] corner-borders",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-danger/20 to-transparent"}),e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-600 hover:text-gray-400","aria-label":"Close",children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsxs("h2",{className:"flex items-center gap-2 text-xs font-mono text-danger tracking-wider mb-4",children:[e.jsx(fe,{className:"h-3.5 w-3.5"}),">"," REPORT_CRIME"]}),t&&e.jsxs("div",{className:"mb-4 border border-danger/20 bg-danger/5 p-3 text-[10px] font-mono text-danger tracking-wider",role:"alert",children:["[ERROR] ",t]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"crime-type",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"CRIME_TYPE"}),e.jsx("input",{id:"crime-type",value:r.type,onChange:u=>f("type",u.target.value),required:!0,maxLength:100,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all",placeholder:"e.g., Theft, Assault"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"crime-lat",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"LATITUDE"}),e.jsx("input",{id:"crime-lat",type:"number",step:"any",value:r.lat,onChange:u=>f("lat",u.target.value),required:!0,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"crime-lng",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"LONGITUDE"}),e.jsx("input",{id:"crime-lng",type:"number",step:"any",value:r.lng,onChange:u=>f("lng",u.target.value),required:!0,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"crime-severity",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"SEVERITY"}),e.jsxs("select",{id:"crime-severity",value:r.severity,onChange:u=>f("severity",u.target.value),className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:outline-none transition-all",children:[e.jsx("option",{value:"low",children:"LOW"}),e.jsx("option",{value:"medium",children:"MEDIUM"}),e.jsx("option",{value:"high",children:"HIGH"}),e.jsx("option",{value:"critical",children:"CRITICAL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"crime-status",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"STATUS"}),e.jsxs("select",{id:"crime-status",value:r.status,onChange:u=>f("status",u.target.value),className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:outline-none transition-all",children:[e.jsx("option",{value:"reported",children:"REPORTED"}),e.jsx("option",{value:"investigating",children:"INVESTIGATING"}),e.jsx("option",{value:"resolved",children:"RESOLVED"}),e.jsx("option",{value:"closed",children:"CLOSED"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"border border-brand/10 bg-gray-950 px-4 py-2 text-[10px] font-mono text-gray-400 hover:text-brand hover:border-brand/30 tracking-wider transition-colors",children:"CANCEL"}),e.jsx("button",{type:"submit",disabled:l,className:"border border-danger/20 bg-danger/5 px-4 py-2 text-[10px] font-mono text-danger hover:bg-danger/10 disabled:opacity-50 tracking-wider transition-colors",children:l?"PROCESSING...":"FILE_REPORT"})]})]})]})]})}function Pr(){const{canWrite:n}=Ke(),[a,s]=m.useState(!1),[r,i]=m.useState(!1);m.useEffect(()=>{i(!0)},[]);const{data:t,loading:o,refetch:l}=Be("/crime",{page:1,limit:50,params:{sort_by:"timestamp",sort_order:"desc"}}),c=m.useMemo(()=>t.filter(d=>d.status==="reported"||d.status==="investigating").length,[t]);return o&&!t.length?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(We,{})}):e.jsxs("div",{className:`space-y-4 ${r?"animate-fade-up":"opacity-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(fe,{className:"h-5 w-5 text-danger drop-shadow-[0_0_6px_rgba(255,0,60,0.5)]"}),e.jsx("h1",{className:"text-lg font-bold text-danger font-[Orbitron] tracking-widest text-glow-danger",children:"CRIME DASHBOARD"}),c>0&&e.jsxs("div",{className:"flex items-center gap-1.5 ml-3 px-2 py-0.5 border border-danger/30 bg-danger/5",children:[e.jsx(He,{className:"h-3 w-3 text-danger"}),e.jsxs("span",{className:"text-[9px] font-mono tracking-wider text-danger",children:[c," ACTIVE"]})]})]}),e.jsxs("p",{className:"text-[10px] text-gray-600 font-mono tracking-[0.2em]",children:[">"," CRIME_INTELLIGENCE // DELHI NCR REAL-TIME ANALYSIS"]})]}),n&&e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 border border-danger/20 bg-danger/5 px-4 py-2 text-[10px] font-mono text-danger hover:bg-danger/10 tracking-wider transition-colors",children:[e.jsx(It,{className:"h-3 w-3"})," REPORT_CRIME"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(fr,{data:t}),e.jsx(cr,{data:t})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(Er,{data:t}),e.jsx(Ir,{data:t})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(hr,{data:t}),e.jsx(vr,{data:t})]}),e.jsx(Sr,{open:a,onClose:()=>s(!1),onSuccess:l})]})}export{Pr as default};
