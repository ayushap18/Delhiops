import{c as f,j as e,C as c,b as N,f as j,r as o,X as y,e as v,p as w,q as E,k,s as C,u as A,L as _}from"./index-LIPNnWQ7.js";import{u as S}from"./useApi-Caf7vIGF.js";import{P as F}from"./plus-DprA7sbM.js";const L=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],O=f("external-link",L);function R({camera:t}){const a=t.status==="online";return e.jsxs("div",{className:"card-3d bg-gray-950 border border-brand/10 p-4 relative overflow-hidden corner-borders group hover:border-brand/20 transition-colors",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px",style:{background:`linear-gradient(90deg, transparent, ${a?"rgba(0,255,65,0.2)":"rgba(255,0,60,0.2)"}, transparent)`}}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{className:N("h-3.5 w-3.5",a?"text-brand":"text-gray-600")}),e.jsxs("span",{className:"text-[10px] font-mono font-medium text-gray-400 tracking-wider",children:["CAM_",String(t.id).padStart(3,"0")]})]}),e.jsx(j,{status:t.status})]}),e.jsx("div",{className:"aspect-video bg-gray-950 border border-brand/5 flex items-center justify-center mb-3",children:a?e.jsxs("div",{className:"text-center",children:[e.jsx(c,{className:"h-6 w-6 text-brand/30 mx-auto mb-1"}),e.jsx("p",{className:"text-[9px] text-brand/50 font-mono tracking-wider",children:"FEED ACTIVE"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[e.jsx("span",{className:"h-1.5 w-1.5 bg-brand status-dot"}),e.jsx("span",{className:"text-[8px] text-brand/40 font-mono",children:"STREAMING"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(c,{className:"h-6 w-6 text-gray-800 mx-auto mb-1"}),e.jsx("p",{className:"text-[9px] text-gray-700 font-mono tracking-wider",children:t.status==="maintenance"?"MAINTENANCE MODE":"SIGNAL LOST"})]})}),e.jsxs("div",{className:"text-[9px] text-gray-600 font-mono space-y-1 tracking-wider",children:[t.location&&e.jsxs("p",{children:["LOC: ",t.location.lat.toFixed(4),", ",t.location.lng.toFixed(4)]}),t.feed_url&&e.jsxs("a",{href:t.feed_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-brand/60 hover:text-brand transition-colors",children:[e.jsx(O,{className:"h-2.5 w-2.5"})," FEED_URL"]})]})]})}function T({open:t,onClose:a,onSuccess:n}){const[r,x]=o.useState({lat:"28.6139",lng:"77.2090",feed_url:"",status:"online"}),[m,b]=o.useState(""),[d,u]=o.useState(!1);if(!t)return null;const h=async s=>{s.preventDefault(),u(!0),b("");try{await v.post("/cameras",{location:{lat:parseFloat(r.lat),lng:parseFloat(r.lng)},feed_url:r.feed_url,status:r.status}),n(),a()}catch(i){b(i.response?.data?.error?.message||"Failed to create camera")}finally{u(!1)}},l=(s,i)=>x(g=>({...g,[s]:i}));return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black/80",onClick:a}),e.jsxs("div",{className:"relative z-10 w-full max-w-md bg-gray-950 border border-brand/10 p-6 shadow-[0_0_30px_rgba(0,255,65,0.05)] corner-borders",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brand/20 to-transparent"}),e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-600 hover:text-gray-400","aria-label":"Close",children:e.jsx(y,{className:"h-4 w-4"})}),e.jsxs("h2",{className:"flex items-center gap-2 text-xs font-mono text-brand tracking-wider mb-4",children:[e.jsx(c,{className:"h-3.5 w-3.5"}),">"," ADD_CAMERA"]}),m&&e.jsxs("div",{className:"mb-4 border border-danger/20 bg-danger/5 p-3 text-[10px] font-mono text-danger tracking-wider",role:"alert",children:["[ERROR] ",m]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cam-lat",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"LATITUDE"}),e.jsx("input",{id:"cam-lat",type:"number",step:"any",value:r.lat,onChange:s=>l("lat",s.target.value),required:!0,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cam-lng",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"LONGITUDE"}),e.jsx("input",{id:"cam-lng",type:"number",step:"any",value:r.lng,onChange:s=>l("lng",s.target.value),required:!0,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"feed-url",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"FEED_URL"}),e.jsx("input",{id:"feed-url",type:"url",value:r.feed_url,onChange:s=>l("feed_url",s.target.value),required:!0,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all",placeholder:"https://stream.example.com/cam1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cam-status",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"STATUS"}),e.jsxs("select",{id:"cam-status",value:r.status,onChange:s=>l("status",s.target.value),className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:outline-none transition-all",children:[e.jsx("option",{value:"online",children:"ONLINE"}),e.jsx("option",{value:"offline",children:"OFFLINE"}),e.jsx("option",{value:"maintenance",children:"MAINTENANCE"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"border border-brand/10 bg-gray-950 px-4 py-2 text-[10px] font-mono text-gray-400 hover:text-brand hover:border-brand/30 tracking-wider transition-colors",children:"CANCEL"}),e.jsx("button",{type:"submit",disabled:d,className:"border border-brand/20 bg-brand/5 px-4 py-2 text-[10px] font-mono text-brand hover:bg-brand/10 disabled:opacity-50 tracking-wider transition-colors",children:d?"PROCESSING...":"DEPLOY_CAMERA"})]})]})]})]})}function D({page:t,totalPages:a,total:n,onPageChange:r}){return a<=1?null:e.jsxs("nav",{className:"flex items-center justify-between border-t border-brand/10 px-4 py-3 mt-4","aria-label":"Pagination",children:[e.jsxs("p",{className:"text-[10px] text-gray-600 font-mono tracking-wider",children:["PAGE ",e.jsx("span",{className:"text-brand",children:t})," OF"," ",e.jsx("span",{className:"text-brand",children:a}),e.jsxs("span",{className:"ml-2 text-gray-700",children:["// ",n," RECORDS"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>r(t-1),disabled:t<=1,className:"inline-flex items-center bg-gray-950 border border-brand/10 px-3 py-1.5 text-[10px] font-mono text-gray-400 hover:text-brand hover:border-brand/30 disabled:opacity-30 disabled:cursor-not-allowed transition-colors tracking-wider","aria-label":"Previous page",children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),"PREV"]}),e.jsxs("button",{onClick:()=>r(t+1),disabled:t>=a,className:"inline-flex items-center bg-gray-950 border border-brand/10 px-3 py-1.5 text-[10px] font-mono text-gray-400 hover:text-brand hover:border-brand/30 disabled:opacity-30 disabled:cursor-not-allowed transition-colors tracking-wider","aria-label":"Next page",children:["NEXT",e.jsx(E,{className:"h-3 w-3 ml-1"})]})]})]})}function I({title:t="NO DATA FOUND",description:a="No records match the current query.",icon:n}){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border border-brand/5 bg-gray-950",children:[n||e.jsx(k,{className:"h-8 w-8 mb-3 text-gray-700"}),e.jsx("h3",{className:"text-xs font-mono font-medium text-gray-500 tracking-[0.2em]",children:t}),e.jsx("p",{className:"mt-1 text-[10px] font-mono text-gray-700",children:a})]})}function q(){const{openDetailPanel:t}=C(),{canWrite:a}=A(),[n,r]=o.useState(1),[x,m]=o.useState(""),[b,d]=o.useState(!1),[u,h]=o.useState(!1);o.useEffect(()=>{h(!0)},[]);const{data:l,loading:s,pagination:i,refetch:g}=S("/cameras",{page:n,limit:50,params:{status:x||void 0}});return e.jsxs("div",{className:u?"animate-fade-up":"opacity-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(c,{className:"h-5 w-5 text-brand drop-shadow-[0_0_6px_rgba(0,255,65,0.5)]"}),e.jsx("h1",{className:"text-lg font-bold text-brand font-[Orbitron] tracking-widest text-glow",children:"SURVEILLANCE GRID"})]}),e.jsxs("p",{className:"text-[10px] text-gray-600 font-mono tracking-[0.2em]",children:[">"," CAMERA_NETWORK // CCTV MONITORING SYSTEM"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:x,onChange:p=>{m(p.target.value),r(1)},className:"bg-gray-950 border border-brand/10 px-3 py-2 text-[10px] font-mono text-gray-400 tracking-wider","aria-label":"Filter by status",children:[e.jsx("option",{value:"",children:"ALL STATUS"}),e.jsx("option",{value:"online",children:"ONLINE"}),e.jsx("option",{value:"offline",children:"OFFLINE"}),e.jsx("option",{value:"maintenance",children:"MAINTENANCE"})]}),a&&e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 border border-brand/20 bg-brand/5 px-4 py-2 text-[10px] font-mono text-brand hover:bg-brand/10 tracking-wider transition-colors",children:[e.jsx(F,{className:"h-3 w-3"})," ADD_CAMERA"]})]})]}),s?e.jsx(_,{}):l.length===0?e.jsx(I,{title:"NO CAMERAS FOUND",description:"No cameras match the current filter criteria."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.map(p=>e.jsx(R,{camera:p},p.id))}),i&&e.jsx(D,{page:n,totalPages:i.totalPages,total:i.total,onPageChange:r}),e.jsx(T,{open:b,onClose:()=>d(!1),onSuccess:g})]})}export{q as default};
