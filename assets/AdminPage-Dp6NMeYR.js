import{c,r as a,e as i,j as e,L as v,k as j}from"./index-LIPNnWQ7.js";import{A as w}from"./activity-BiL81ND9.js";import{Z as u}from"./zap-BZ7WlmBL.js";import{D as k}from"./database-Bz-9_Hfz.js";const E=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],M=c("hard-drive",E);const S=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],x=c("refresh-cw",S);const A=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],m=c("trash-2",A);function L(){const[b,h]=a.useState(null),[p,g]=a.useState(null),[f,d]=a.useState(!0),[t,l]=a.useState("");a.useEffect(()=>{n()},[]);async function n(){d(!0);try{const[r,o]=await Promise.all([i.get("/system/metrics"),i.get("/system/cache/metrics")]);h(r.data.data),g(o.data.data)}catch(r){console.error("Failed to fetch system metrics:",r)}finally{d(!1)}}async function s(r,o,y="post"){l(r);try{y==="post"&&await i.post(o),await n()}catch(N){console.error(`Action ${r} failed:`,N)}finally{l("")}}return f?e.jsx(v,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(j,{className:"h-4 w-4 text-brand"}),e.jsx("h1",{className:"text-lg font-bold text-brand font-[Orbitron] tracking-widest text-glow",children:"SYSTEM ADMIN"})]}),e.jsxs("p",{className:"text-[10px] text-gray-600 font-mono tracking-[0.2em]",children:[">"," SYS_CONTROL // METRICS & CACHE MANAGEMENT"]})]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2 border border-brand/20 bg-brand/5 px-4 py-2 text-[10px] font-mono text-brand hover:bg-brand/10 tracking-wider transition-colors",children:[e.jsx(x,{className:"h-3 w-3"})," REFRESH"]})]}),e.jsxs("div",{className:"bg-gray-950 border border-brand/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brand/20 to-transparent"}),e.jsxs("h2",{className:"flex items-center gap-2 text-xs font-mono text-brand tracking-wider mb-4",children:[e.jsx(w,{className:"h-3.5 w-3.5"}),">"," SYSTEM_METRICS"]}),e.jsx("pre",{className:"text-[10px] text-brand/70 font-mono bg-gray-950 border border-brand/5 p-4 overflow-auto max-h-64",children:JSON.stringify(b,null,2)})]}),e.jsxs("div",{className:"bg-gray-950 border border-brand/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brand/20 to-transparent"}),e.jsxs("h2",{className:"flex items-center gap-2 text-xs font-mono text-brand tracking-wider mb-4",children:[e.jsx(M,{className:"h-3.5 w-3.5"}),">"," CACHE_MANAGEMENT"]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsxs("button",{onClick:()=>s("warm","/system/cache/warm"),disabled:t==="warm",className:"flex items-center gap-2 border border-brand/20 bg-brand/5 px-4 py-2 text-[10px] font-mono text-brand hover:bg-brand/10 disabled:opacity-50 tracking-wider transition-colors",children:[e.jsx(u,{className:"h-3 w-3"}),t==="warm"?"WARMING...":"WARM_CACHE"]}),e.jsxs("button",{onClick:()=>s("bust","/system/cache/bust","post"),disabled:t==="bust",className:"flex items-center gap-2 border border-danger/20 bg-danger/5 px-4 py-2 text-[10px] font-mono text-danger hover:bg-danger/10 disabled:opacity-50 tracking-wider transition-colors",children:[e.jsx(m,{className:"h-3 w-3"}),t==="bust"?"BUSTING...":"BUST_ALL"]})]}),e.jsx("pre",{className:"text-[10px] text-brand/70 font-mono bg-gray-950 border border-brand/5 p-4 overflow-auto max-h-64",children:JSON.stringify(p,null,2)})]}),e.jsxs("div",{className:"bg-gray-950 border border-brand/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brand/20 to-transparent"}),e.jsxs("h2",{className:"flex items-center gap-2 text-xs font-mono text-info tracking-wider mb-4",children:[e.jsx(k,{className:"h-3.5 w-3.5"}),">"," DATABASE_OPS"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>s("refresh-views","/system/db/views/refresh"),disabled:!!t,className:"flex items-center gap-2 border border-info/20 bg-info/5 px-4 py-2 text-[10px] font-mono text-info hover:bg-info/10 disabled:opacity-50 tracking-wider transition-colors",children:[e.jsx(x,{className:"h-3 w-3"}),t==="refresh-views"?"REFRESHING...":"REFRESH_VIEWS"]}),e.jsxs("button",{onClick:()=>s("retention","/system/db/retention/run"),disabled:!!t,className:"flex items-center gap-2 border border-warning/20 bg-warning/5 px-4 py-2 text-[10px] font-mono text-warning hover:bg-warning/10 disabled:opacity-50 tracking-wider transition-colors",children:[e.jsx(m,{className:"h-3 w-3"}),t==="retention"?"RUNNING...":"RUN_RETENTION"]})]})]})]})}export{L as default};
