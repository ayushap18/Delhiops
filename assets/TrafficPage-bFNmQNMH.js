import{r as f,j as e,f as H,X as W,d as L,e as z,u as F,L as _,T as P}from"./index-LIPNnWQ7.js";import{u as E}from"./useApi-Caf7vIGF.js";import{A as u,R as B}from"./CategoricalChart-BdK7anDn.js";import{S as C,u as K,G as U,T as V,M as Y,I as $}from"./esm-BBU3mEpq.js";import{C as J,X as Z,Y as k,T as X,b as q}from"./ChartTooltip-BmMmTnkw.js";import{L as Q,a as w}from"./LineChart-CKcjXPT0.js";import{L as ee}from"./Legend-BdfxPtcJ.js";import{P as te}from"./plus-DprA7sbM.js";import"./ActivePoints-DZzz5lA6.js";import"./ErrorBarContext-Bul-u9tG.js";import"./getRadiusAndStrokeWidthFromDot-lZTj4Q4q.js";function I(a){return a>=80?"#ff003c":a>=60?"#ff6600":a>=40?"#ffb800":a>=20?"#00d4ff":"#00ff41"}function ae(a){return a>=80?"GRIDLOCK":a>=60?"HEAVY":a>=40?"MODERATE":a>=20?"LIGHT":"FREE FLOW"}function ne({data:a}){const s=f.useMemo(()=>{if(!a.length)return null;const r=a.map(p=>p.congestion_level),c=a.map(p=>p.speed),n=p=>Math.round(p.reduce((h,v)=>h+v,0)/p.length),i=n(r),l=Math.max(...r),m=n(c),g=Math.min(...c),d=Math.max(...c),x={};a.forEach(p=>{const h=new Date(p.timestamp).getHours();x[h]||(x[h]={count:0,totalCong:0}),x[h].count++,x[h].totalCong+=p.congestion_level});const y=Object.entries(x).map(([p,h])=>({hour:parseInt(p),avg:h.totalCong/h.count})).sort((p,h)=>h.avg-p.avg)[0];return{avgCongestion:i,maxCongestion:l,avgSpeed:m,minSpeed:g,maxSpeed:d,peakHour:y,congestions:r,speeds:c}},[a]);if(!s)return null;const o=I(s.avgCongestion),t=ae(s.avgCongestion);return e.jsxs("div",{className:"bg-gray-950 border border-info/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-info/20 to-transparent"}),e.jsxs("h3",{className:"text-[10px] font-mono text-info tracking-wider mb-4",children:[">"," TRAFFIC_OVERVIEW // COMMAND CENTER"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"relative w-28 h-28 shrink-0",children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"#0a1a0a",strokeWidth:"6"}),e.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:o,strokeWidth:"6",strokeDasharray:`${s.avgCongestion*2.64} 264`,strokeDashoffset:"0",strokeLinecap:"round",transform:"rotate(-90 50 50)",style:{filter:`drop-shadow(0 0 4px ${o}60)`,transition:"stroke-dasharray 1s ease-out"}}),e.jsx("text",{x:"50",y:"44",textAnchor:"middle",fill:o,fontSize:"18",fontFamily:"Orbitron",fontWeight:"bold",children:s.avgCongestion}),e.jsx("text",{x:"50",y:"54",textAnchor:"middle",fill:"#555",fontSize:"5",fontFamily:"JetBrains Mono",letterSpacing:"1",children:"% CONGESTION"}),e.jsx("text",{x:"50",y:"65",textAnchor:"middle",fill:o,fontSize:"6",fontFamily:"JetBrains Mono",letterSpacing:"0.5",opacity:"0.8",children:t})]})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"border border-info/10 bg-info/5 px-2 py-1.5",children:[e.jsx("p",{className:"text-[5.5px] font-mono text-gray-600 tracking-wider",children:"AVG SPEED"}),e.jsxs("p",{className:"text-[14px] font-bold font-[Orbitron] text-info",children:[e.jsx(u,{value:s.avgSpeed})," ",e.jsx("span",{className:"text-[8px] text-gray-600",children:"km/h"})]})]}),e.jsxs("div",{className:"border border-info/10 bg-info/5 px-2 py-1.5",children:[e.jsx("p",{className:"text-[5.5px] font-mono text-gray-600 tracking-wider",children:"PEAK HOUR"}),e.jsx("p",{className:"text-[14px] font-bold font-[Orbitron] text-warning",children:s.peakHour?`${s.peakHour.hour}:00`:"--"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"border border-gray-900 px-1.5 py-1 text-center",children:[e.jsx("p",{className:"text-[5px] font-mono text-gray-700 tracking-wider",children:"MAX CONG"}),e.jsxs("p",{className:"text-[10px] font-bold font-mono text-danger",children:[s.maxCongestion,"%"]})]}),e.jsxs("div",{className:"border border-gray-900 px-1.5 py-1 text-center",children:[e.jsx("p",{className:"text-[5px] font-mono text-gray-700 tracking-wider",children:"MAX SPEED"}),e.jsx("p",{className:"text-[10px] font-bold font-mono text-brand",children:s.maxSpeed})]}),e.jsxs("div",{className:"border border-gray-900 px-1.5 py-1 text-center",children:[e.jsx("p",{className:"text-[5px] font-mono text-gray-700 tracking-wider",children:"MIN SPEED"}),e.jsx("p",{className:"text-[10px] font-bold font-mono text-warning",children:s.minSpeed})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[6px] font-mono text-gray-600 tracking-wider w-8",children:"CONG"}),e.jsx(C,{data:s.congestions.slice(-20),width:120,height:18,color:"#ff003c",fillOpacity:.15})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[6px] font-mono text-gray-600 tracking-wider w-8",children:"SPEED"}),e.jsx(C,{data:s.speeds.slice(-20),width:120,height:18,color:"#00ff41",fillOpacity:.15})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[7px] font-mono text-gray-600 tracking-wider mb-1",children:"24H CONGESTION PATTERN"}),e.jsx("div",{className:"flex gap-px",children:Array.from({length:24},(r,c)=>{const n=a.filter(m=>new Date(m.timestamp).getHours()===c),i=n.length?n.reduce((m,g)=>m+g.congestion_level,0)/n.length:0,l=I(i);return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-0.5",children:[e.jsx("div",{className:"w-full h-3 transition-colors duration-500",style:{backgroundColor:i>0?l:"#0a0a0a",opacity:i>0?.3+i/100*.7:.2,boxShadow:i>60?`0 0 4px ${l}40`:"none"}}),c%4===0&&e.jsx("span",{className:"text-[4px] font-mono text-gray-700",children:c})]},c)})})]})]})}const T=[{name:"Ring Road (NH-44)",shortName:"RING ROAD",length:51,avgSpeed:35,peakDelay:45,zones:"Multi-Zone"},{name:"Outer Ring Road",shortName:"ORR",length:64,avgSpeed:40,peakDelay:35,zones:"Peripheral"},{name:"Delhi-Meerut Expy",shortName:"DME",length:82,avgSpeed:60,peakDelay:20,zones:"NE Corridor"},{name:"NH-48 (Delhi-Jaipur)",shortName:"NH-48",length:28,avgSpeed:30,peakDelay:55,zones:"SW Corridor"},{name:"GT Karnal Road",shortName:"GT ROAD",length:35,avgSpeed:25,peakDelay:50,zones:"N Corridor"},{name:"Mathura Road (NH-2)",shortName:"MATHURA RD",length:18,avgSpeed:28,peakDelay:40,zones:"SE Corridor"},{name:"Vikas Marg",shortName:"VIKAS MARG",length:12,avgSpeed:20,peakDelay:60,zones:"E Delhi"},{name:"ITO-Ashram Flyover",shortName:"ITO-ASHRAM",length:8,avgSpeed:18,peakDelay:65,zones:"Central"},{name:"Barapulla Elevated",shortName:"BARAPULLA",length:14,avgSpeed:45,peakDelay:15,zones:"Central-SE"},{name:"Mehrauli-Badarpur",shortName:"MB ROAD",length:22,avgSpeed:22,peakDelay:55,zones:"S Delhi"}];function se(a){return a>=80?"#ff003c":a>=60?"#ff6600":a>=40?"#ffb800":a>=20?"#00d4ff":"#00ff41"}function re(a){return a>=80?"GRIDLOCK":a>=60?"HEAVY":a>=40?"SLOW":a>=20?"MOVING":"CLEAR"}function oe({data:a}){const s=f.useMemo(()=>{const r=a.length?a.reduce((n,i)=>n+i.congestion_level,0)/a.length:40,c=a.length?a.reduce((n,i)=>n+i.speed,0)/a.length:30;return T.map((n,i)=>{const l=(i*17+7)%40-20,m=Math.max(5,Math.min(95,Math.round(r+l+(n.peakDelay-40)*.5))),g=Math.max(5,Math.round(n.avgSpeed*(1-m/120)+(c-30)*.3)),d=Math.round(n.length/g*60);return{...n,congestion:m,currentSpeed:g,eta:d,color:se(m),status:re(m)}}).sort((n,i)=>i.congestion-n.congestion)},[a]),o=T.reduce((r,c)=>r+c.length,0),t=s.filter(r=>r.congestion>=60).length;return e.jsxs("div",{className:"bg-gray-950 border border-info/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-info/20 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-mono text-info tracking-wider",children:[">"," BUSY_CORRIDORS // DELHI ARTERIALS"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:"MAJOR ROAD NETWORK — LIVE STATUS & ETA"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-[8px] font-mono text-gray-500",children:[e.jsx(u,{value:o})," ",e.jsx("span",{className:"text-[6px] text-gray-700",children:"KM NETWORK"})]}),t>0&&e.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 border border-danger/20 bg-danger/5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-danger rounded-full status-dot"}),e.jsxs("span",{className:"text-[7px] font-mono text-danger tracking-wider",children:[t," CONGESTED"]})]})]})]}),e.jsx("div",{className:"space-y-1 max-h-[380px] overflow-y-auto pr-1",children:s.map((r,c)=>e.jsxs("div",{className:"flex items-center gap-2 px-2 py-2 border-l-2 hover:bg-info/5 transition-colors animate-fade-up",style:{borderLeftColor:r.color+"60",animationDelay:`${c*40}ms`},children:[e.jsx("span",{className:"text-[9px] font-mono font-bold w-4 text-right shrink-0",style:{color:r.color},children:c+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-[9px] font-mono font-bold text-gray-200 tracking-wider truncate",children:r.shortName}),e.jsx("span",{className:"text-[6px] font-mono text-gray-600",children:r.zones})]}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsx("span",{className:"text-[6px] font-mono px-1 py-0.5 border tracking-wider",style:{color:r.color,borderColor:r.color+"30"},children:r.status})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-gray-900 overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-700",style:{width:`${r.congestion}%`,backgroundColor:r.color,boxShadow:r.congestion>60?`0 0 6px ${r.color}50`:"none"}})}),e.jsxs("span",{className:"text-[8px] font-mono font-bold tabular-nums w-7 text-right",style:{color:r.color},children:[r.congestion,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[e.jsxs("span",{className:"text-[6px] font-mono text-gray-500",children:[r.currentSpeed," ",e.jsx("span",{className:"text-gray-700",children:"km/h"})]}),e.jsx("span",{className:"text-[6px] font-mono text-gray-700",children:"|"}),e.jsxs("span",{className:"text-[6px] font-mono text-gray-500",children:[r.length," ",e.jsx("span",{className:"text-gray-700",children:"km"})]}),e.jsx("span",{className:"text-[6px] font-mono text-gray-700",children:"|"}),e.jsxs("span",{className:"text-[6px] font-mono font-bold",style:{color:r.eta>40?"#ff003c":r.eta>20?"#ffb800":"#00ff41"},children:["ETA ",r.eta," min"]})]})]})]},r.shortName))}),e.jsx("div",{className:"mt-2 pt-2 border-t border-info/5 flex items-center justify-center gap-3",children:[{c:"#00ff41",l:"FREE"},{c:"#00d4ff",l:"LIGHT"},{c:"#ffb800",l:"SLOW"},{c:"#ff6600",l:"HEAVY"},{c:"#ff003c",l:"GRIDLOCK"}].map(r=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-1",style:{backgroundColor:r.c,boxShadow:`0 0 3px ${r.c}40`}}),e.jsx("span",{className:"text-[5px] font-mono text-gray-600 tracking-wider",children:r.l})]},r.l))})]})}const ie=[{id:"ring-ne",name:"Ring Road NE",d:"M148,88 C170,86 195,92 210,108 C225,124 228,140 225,155",zone:"east",type:"highway"},{id:"ring-se",name:"Ring Road SE",d:"M225,155 C222,170 218,188 210,200 C200,215 185,225 168,230",zone:"south",type:"highway"},{id:"ring-sw",name:"Ring Road SW",d:"M168,230 C150,232 130,228 115,218 C100,208 90,195 85,180",zone:"south",type:"highway"},{id:"ring-nw",name:"Ring Road NW",d:"M85,180 C82,160 84,140 90,122 C96,104 110,92 130,88 L148,88",zone:"north",type:"highway"},{id:"orr-n",name:"ORR North",d:"M55,55 C100,38 160,32 210,38 C240,42 258,52 268,65",zone:"north",type:"highway"},{id:"orr-e",name:"ORR East",d:"M268,65 C278,85 282,115 280,145 C278,175 270,210 258,240",zone:"east",type:"highway"},{id:"orr-s",name:"ORR South",d:"M258,240 C240,260 200,275 160,280 C120,282 85,272 60,255",zone:"south",type:"highway"},{id:"orr-w",name:"ORR West",d:"M60,255 C45,235 35,205 30,170 C28,135 32,100 40,75 L55,55",zone:"west",type:"highway"},{id:"nh44-n",name:"NH-44 North",d:"M148,88 C146,65 144,42 140,15",zone:"north",type:"nh"},{id:"nh44-s",name:"NH-44 South",d:"M168,230 C172,255 175,275 178,300",zone:"south",type:"nh"},{id:"nh48",name:"NH-48 Jaipur",d:"M85,180 C60,200 40,225 18,258",zone:"southwest",type:"nh"},{id:"nh24",name:"NH-24 Lucknow",d:"M225,155 C248,148 268,138 290,125",zone:"east",type:"nh"},{id:"nh2",name:"NH-2 Mathura",d:"M210,200 C235,225 258,250 278,275",zone:"southeast",type:"nh"},{id:"gt-road",name:"GT Karnal Road",d:"M130,88 C118,65 105,40 92,15",zone:"north",type:"nh"},{id:"vikas",name:"Vikas Marg",d:"M170,140 C195,138 220,132 250,125",zone:"east",type:"arterial"},{id:"mathura-rd",name:"Mathura Road",d:"M170,155 C178,180 186,210 195,245",zone:"south",type:"arterial"},{id:"ito-corr",name:"ITO Corridor",d:"M130,148 C145,145 160,142 175,140",zone:"central",type:"arterial"},{id:"barapulla",name:"Barapulla Elev.",d:"M145,175 C170,178 195,182 218,188",zone:"central",type:"arterial"},{id:"mb-road",name:"MB Road",d:"M115,218 C108,240 100,260 92,280",zone:"south",type:"arterial"},{id:"rohtak-rd",name:"Rohtak Road",d:"M115,145 C95,140 72,135 48,128",zone:"west",type:"arterial"},{id:"dme",name:"DME",d:"M210,108 C232,88 255,68 280,48",zone:"northeast",type:"arterial"},{id:"aurobindo",name:"Aurobindo Marg",d:"M148,160 C140,185 132,210 125,235",zone:"south",type:"arterial"}],j="M195,10 C198,25 202,45 208,65 C214,85 222,100 228,115 C232,130 230,148 225,165 C220,182 215,198 212,215 C210,232 215,252 222,272 C228,288 235,300 242,315",le=[{id:"blue",d:"M55,145 C80,140 110,138 140,140 C165,142 190,145 220,150 C240,155 256,162 270,172",color:"#0066cc"},{id:"yellow",d:"M135,15 C136,40 138,70 142,100 C146,130 150,160 155,190 C160,220 165,250 170,285",color:"#ffcc00"},{id:"red",d:"M18,120 C40,118 65,115 95,118 C125,122 148,132 168,145 C188,158 205,172 225,185",color:"#cc0000"}],ce=[{name:"ISBT",x:148,y:88,major:!0},{name:"ITO",x:170,y:140,major:!0},{name:"CP",x:145,y:148,major:!0},{name:"AIIMS",x:142,y:178,major:!0},{name:"DHAULA KUAN",x:80,y:172,major:!0},{name:"SAKET",x:130,y:228,major:!1},{name:"ASHRAM",x:212,y:195,major:!0},{name:"ANAND VIHAR",x:252,y:132,major:!1},{name:"KASHMERE G.",x:142,y:98,major:!1},{name:"DWARKA",x:42,y:210,major:!1},{name:"NEHRU PL.",x:195,y:215,major:!1},{name:"PEERAGARHI",x:52,y:120,major:!1},{name:"LAJPAT NGR",x:192,y:192,major:!1},{name:"MOOLCHAND",x:185,y:175,major:!1}],de=[{name:"NORTH",x:130,y:55},{name:"CENTRAL",x:155,y:150},{name:"SOUTH",x:150,y:250},{name:"EAST",x:248,y:155},{name:"WEST",x:55,y:165},{name:"NE",x:240,y:72},{name:"NW",x:65,y:72},{name:"SW",x:58,y:242},{name:"SE",x:238,y:248}];function A(a){return a>=80?"#cc0025":a>=65?"#cc4400":a>=45?"#cc8800":a>=25?"#2299aa":"#118833"}function xe({data:a}){const s=f.useMemo(()=>{const t=a.length?a.reduce((r,c)=>r+c.congestion_level,0)/a.length:40;return ie.map((r,c)=>{const n=(c*13+5)%50-25,i=Math.max(5,Math.min(95,Math.round(t+n))),l=r.type==="highway"?2.5:r.type==="nh"?2:1.2;return{...r,congestion:i,color:A(i),strokeWidth:l+i/100*1.2}})},[a]),o=f.useMemo(()=>a.length?Math.round(a.reduce((t,r)=>t+r.congestion_level,0)/a.length):0,[a]);return e.jsxs("div",{className:"bg-[#050808] border border-info/10 p-4 corner-borders relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-5",style:{background:"radial-gradient(ellipse at 55% 45%, rgba(0,150,180,0.08) 0%, transparent 65%)"}}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-info/20 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-2 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-mono text-info tracking-wider",children:[">"," DELHI_NCR // LIVE TRAFFIC MAP"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:"ROAD NETWORK + METRO OVERLAY + YAMUNA"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-info rounded-full status-dot"}),e.jsx("span",{className:"text-[7px] font-mono text-info tracking-widest",children:"LIVE"})]}),e.jsxs("span",{className:"text-[8px] font-mono tabular-nums",style:{color:A(o)},children:[o,"%"]})]})]}),e.jsxs("svg",{viewBox:"0 0 310 320",className:"w-full h-auto relative z-10",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"rn-glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"g"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"g"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"river-glow",x:"-30%",y:"-10%",width:"160%",height:"120%",children:[e.jsx("feGaussianBlur",{stdDeviation:"4",result:"g"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"g"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("linearGradient",{id:"rn-scan",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#00d4ff",stopOpacity:"0"}),e.jsx("stop",{offset:"50%",stopColor:"#00d4ff",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#00d4ff",stopOpacity:"0"})]}),e.jsxs("linearGradient",{id:"yamuna-grad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#0a3355"}),e.jsx("stop",{offset:"50%",stopColor:"#0d4466"}),e.jsx("stop",{offset:"100%",stopColor:"#0a3355"})]})]}),e.jsxs("g",{stroke:"#0a0f10",strokeWidth:"0.2",opacity:"0.5",children:[Array.from({length:16},(t,r)=>e.jsx("line",{x1:r*20,y1:"0",x2:r*20,y2:"320"},`v${r}`)),Array.from({length:17},(t,r)=>e.jsx("line",{x1:"0",y1:r*20,x2:"310",y2:r*20},`h${r}`))]}),e.jsx("text",{x:"4",y:"10",fill:"#0d1a1a",fontSize:"4.5",fontFamily:"JetBrains Mono",children:"28.76°N"}),e.jsx("text",{x:"4",y:"315",fill:"#0d1a1a",fontSize:"4.5",fontFamily:"JetBrains Mono",children:"28.48°N"}),e.jsx("text",{x:"262",y:"315",fill:"#0d1a1a",fontSize:"4.5",fontFamily:"JetBrains Mono",children:"77.36°E"}),e.jsx("path",{d:"M78,18 C90,12 110,8 135,8 C165,9 190,12 210,18 C230,25 248,38 260,55 C272,72 278,95 280,120 C282,148 278,178 270,205 C262,228 248,248 232,262 C215,276 195,286 172,292 C150,296 128,294 108,286 C88,278 72,264 60,248 C48,230 38,208 34,185 C30,162 30,138 34,115 C38,92 48,72 62,55 C72,42 78,18 78,18 Z",fill:"none",stroke:"#1a2a2a",strokeWidth:"0.8",strokeDasharray:"4 3"}),e.jsx("line",{x1:"40",y1:"135",x2:"275",y2:"135",stroke:"#0d1515",strokeWidth:"0.3",strokeDasharray:"8 6"}),e.jsx("line",{x1:"155",y1:"15",x2:"155",y2:"295",stroke:"#0d1515",strokeWidth:"0.3",strokeDasharray:"8 6"}),e.jsx("line",{x1:"200",y1:"15",x2:"230",y2:"295",stroke:"#0d1515",strokeWidth:"0.3",strokeDasharray:"8 6"}),de.map(t=>e.jsx("text",{x:t.x,y:t.y,fill:"#0f1a1a",fontSize:"6",fontFamily:"JetBrains Mono",textAnchor:"middle",letterSpacing:"2",fontWeight:"bold",children:t.name},t.name)),e.jsx("path",{d:j,fill:"none",stroke:"#0a3355",strokeWidth:"12",strokeOpacity:"0.3",strokeLinecap:"round",filter:"url(#river-glow)"}),e.jsx("path",{d:j,fill:"none",stroke:"#0d4466",strokeWidth:"5",strokeOpacity:"0.5",strokeLinecap:"round"}),e.jsx("path",{d:j,fill:"none",stroke:"#1a5577",strokeWidth:"2",strokeOpacity:"0.6",strokeLinecap:"round"}),e.jsx("text",{x:"232",y:"165",fill:"#0d4466",fontSize:"5",fontFamily:"JetBrains Mono",textAnchor:"middle",letterSpacing:"3",opacity:"0.5",transform:"rotate(78, 232, 165)",children:"YAMUNA"}),le.map(t=>e.jsx("g",{children:e.jsx("path",{d:t.d,fill:"none",stroke:t.color,strokeWidth:"1",strokeOpacity:"0.12",strokeDasharray:"4 3"})},t.id)),s.map(t=>e.jsxs("g",{children:[e.jsx("path",{d:t.d,fill:"none",stroke:"#080a0a",strokeWidth:t.strokeWidth+1.5,strokeLinecap:"round",strokeLinejoin:"round"}),t.congestion>50&&e.jsx("path",{d:t.d,fill:"none",stroke:t.color,strokeWidth:t.strokeWidth+4,strokeOpacity:"0.06",filter:"url(#rn-glow)",strokeLinecap:"round"}),e.jsx("path",{d:t.d,fill:"none",stroke:t.color,strokeWidth:t.strokeWidth,strokeOpacity:.35+t.congestion/100*.55,strokeLinecap:"round",strokeLinejoin:"round"}),t.type==="highway"&&e.jsx("path",{d:t.d,fill:"none",stroke:t.color,strokeWidth:"0.3",strokeOpacity:"0.3",strokeDasharray:"3 4",strokeLinecap:"round"}),t.congestion>45&&e.jsx("circle",{r:t.type==="highway"?"1.5":"1",fill:t.color,opacity:"0.7",children:e.jsx("animateMotion",{dur:`${7-t.congestion/20}s`,repeatCount:"indefinite",path:t.d})})]},t.id)),ce.map(t=>e.jsxs("g",{children:[t.major&&e.jsx("circle",{cx:t.x,cy:t.y,r:"5",fill:"none",stroke:"#00d4ff",strokeWidth:"0.3",strokeOpacity:"0.2"}),e.jsx("circle",{cx:t.x,cy:t.y,r:t.major?"3":"2",fill:"#080a0a",stroke:"#11aabb",strokeWidth:t.major?"0.8":"0.5",strokeOpacity:t.major?"0.5":"0.3"}),e.jsx("circle",{cx:t.x,cy:t.y,r:t.major?"1.2":"0.8",fill:"#11aabb",opacity:t.major?"0.5":"0.3"}),e.jsx("text",{x:t.x,y:t.y+(t.major?10:8),fill:"#11aabb",fontSize:t.major?"4.5":"3.8",fontFamily:"JetBrains Mono",textAnchor:"middle",opacity:t.major?"0.5":"0.3",letterSpacing:"0.3",children:t.name})]},t.name)),e.jsx("rect",{x:"0",y:"0",width:"310",height:"2",fill:"url(#rn-scan)",opacity:"0.2",children:e.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,320;0,0",dur:"10s",repeatCount:"indefinite"})}),e.jsxs("g",{stroke:"#11aabb",strokeWidth:"0.4",opacity:"0.15",children:[e.jsx("polyline",{points:"5,12 5,5 12,5",fill:"none"}),e.jsx("polyline",{points:"298,5 305,5 305,12",fill:"none"}),e.jsx("polyline",{points:"5,308 5,315 12,315",fill:"none"}),e.jsx("polyline",{points:"298,315 305,315 305,308",fill:"none"})]}),e.jsxs("g",{transform:"translate(285,25)",opacity:"0.3",children:[e.jsx("line",{x1:"0",y1:"12",x2:"0",y2:"0",stroke:"#11aabb",strokeWidth:"0.6"}),e.jsx("polygon",{points:"0,0 -3,5 3,5",fill:"#11aabb"}),e.jsx("text",{x:"0",y:"18",fill:"#11aabb",fontSize:"4",fontFamily:"JetBrains Mono",textAnchor:"middle",letterSpacing:"0.5",children:"N"})]})]}),e.jsxs("div",{className:"relative z-10 mt-2 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:[{c:"#118833",l:"FREE"},{c:"#2299aa",l:"LIGHT"},{c:"#cc8800",l:"MODERATE"},{c:"#cc4400",l:"HEAVY"},{c:"#cc0025",l:"GRIDLOCK"}].map(t=>e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx("div",{className:"w-3 h-[2px]",style:{backgroundColor:t.c,opacity:.8}}),e.jsx("span",{className:"text-[4.5px] font-mono text-gray-700 tracking-wider",children:t.l})]},t.l))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx("div",{className:"w-3 h-[1px]",style:{borderTop:"1px dashed #0d4466"}}),e.jsx("span",{className:"text-[4.5px] font-mono text-gray-700 tracking-wider",children:"YAMUNA"})]}),e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx("div",{className:"w-3 h-[1px]",style:{borderTop:"1px dashed #ffcc00",opacity:.3}}),e.jsx("span",{className:"text-[4.5px] font-mono text-gray-700 tracking-wider",children:"METRO"})]})]})]})]})}const me={lat:28.6139,lng:77.209},fe=[{elementType:"geometry",stylers:[{color:"#0a1215"}]},{elementType:"labels.text.stroke",stylers:[{color:"#0a1215"}]},{elementType:"labels.text.fill",stylers:[{color:"#1a5a6a"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#0d2a35"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#0d3a4a"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#0c1a20"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#0d3a4a"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#0a1f15"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#112025"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#0a1518"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#153040"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#0d2028"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#1a3848"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#122830"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#0d2028"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#1a6a7a"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#081820"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#0d4a5a"}]}],pe={width:"100%",height:"100%"},M=[{id:"SIG-001",name:"ITO Junction",lat:28.6304,lng:77.2505,priority:"critical"},{id:"SIG-002",name:"Kashmere Gate",lat:28.6667,lng:77.2273,priority:"critical"},{id:"SIG-003",name:"AIIMS Flyover",lat:28.5672,lng:77.21,priority:"critical"},{id:"SIG-005",name:"Ashram Chowk",lat:28.5697,lng:77.2586,priority:"critical"},{id:"SIG-007",name:"Dhaula Kuan",lat:28.5921,lng:77.1562,priority:"critical"},{id:"SIG-010",name:"Connaught Place",lat:28.6315,lng:77.2167,priority:"critical"},{id:"SIG-014",name:"Sarai Kale Khan",lat:28.5895,lng:77.2568,priority:"critical"},{id:"SIG-004",name:"Moolchand",lat:28.5713,lng:77.2378,priority:"high"},{id:"SIG-006",name:"Rajouri Garden",lat:28.6492,lng:77.1224,priority:"high"},{id:"SIG-008",name:"Pragati Maidan",lat:28.6238,lng:77.2467,priority:"high"},{id:"SIG-009",name:"Nehru Place",lat:28.5491,lng:77.2533,priority:"high"},{id:"SIG-012",name:"Anand Vihar",lat:28.6469,lng:77.3161,priority:"high"},{id:"SIG-015",name:"Peeragarhi",lat:28.6769,lng:77.0939,priority:"high"},{id:"SIG-019",name:"Saket",lat:28.5244,lng:77.209,priority:"high"},{id:"SIG-023",name:"Badarpur",lat:28.5072,lng:77.3029,priority:"high"},{id:"SIG-025",name:"Wazirabad",lat:28.7146,lng:77.2299,priority:"high"}];function he(a,s){const o=85-s*.3,t=(a*37+13)%100;return t>95?"offline":t>o?"fault":t>o-8?"degraded":"operational"}const N={operational:"#00ff41",degraded:"#ffb800",fault:"#ff6600",offline:"#ff003c"};function ge({data:a}){const{isLoaded:s}=K({googleMapsApiKey:"AIzaSyDzG6mW26RqFeISjCWtlQZy0FV61jHiB1Y"}),[o,t]=f.useState(null),[r,c]=f.useState(!0),[n,i]=f.useState(!0),l=f.useMemo(()=>a.length?Math.round(a.reduce((d,x)=>d+x.congestion_level,0)/a.length):40,[a]),m=f.useMemo(()=>M.map((d,x)=>{const y=he(x,l),p=Math.max(5,Math.min(95,Math.round(l+(x*19+11)%40-20)));return{signal:d,health:y,congestion:p}}),[l]),g=f.useCallback(()=>t(null),[]);return s?e.jsxs("div",{className:"bg-[#0a1215] border border-info/10 corner-borders relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-info/20 to-transparent z-20"}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 relative z-20 bg-black/60 backdrop-blur-sm",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-mono text-info tracking-wider",children:[">"," GOOGLE_MAPS // LIVE TRAFFIC LAYER"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:"REAL-TIME ROAD CONDITIONS — DELHI NCR"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(d=>!d),className:`px-2 py-0.5 text-[7px] font-mono tracking-wider border transition-all ${r?"border-info/30 bg-info/10 text-info":"border-gray-800 bg-gray-950 text-gray-600"}`,children:"TRAFFIC"}),e.jsx("button",{onClick:()=>i(d=>!d),className:`px-2 py-0.5 text-[7px] font-mono tracking-wider border transition-all ${n?"border-warning/30 bg-warning/10 text-warning":"border-gray-800 bg-gray-950 text-gray-600"}`,children:"SIGNALS"}),e.jsxs("div",{className:"flex items-center gap-1 ml-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-info rounded-full status-dot"}),e.jsx("span",{className:"text-[7px] font-mono text-info tracking-widest",children:"LIVE"})]})]})]}),e.jsx("div",{style:{height:"420px"},children:e.jsxs(U,{mapContainerStyle:pe,center:me,zoom:11,onClick:g,options:{styles:fe,disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,scaleControl:!1,rotateControl:!1},children:[r&&e.jsx(V,{}),n&&m.map(({signal:d,health:x,congestion:y})=>e.jsx(Y,{position:{lat:d.lat,lng:d.lng},icon:{path:google.maps.SymbolPath.CIRCLE,scale:d.priority==="critical"?9:7,fillColor:N[x],fillOpacity:x==="operational"?.7:.9,strokeColor:x==="offline"?"#ff003c":"#fff",strokeWeight:x==="offline"||x==="fault"?2:1},onClick:()=>t({signal:d,health:x,congestion:y})},d.id)),o&&e.jsx($,{position:{lat:o.signal.lat,lng:o.signal.lng},onCloseClick:()=>t(null),children:e.jsxs("div",{className:"bg-gray-900 text-gray-100 p-2.5 min-w-[180px] font-mono",style:{fontSize:"10px"},children:[e.jsx("p",{className:"font-bold tracking-wider text-[11px]",style:{color:N[o.health]},children:o.signal.name.toUpperCase()}),e.jsxs("p",{className:"text-gray-500 text-[8px] mt-0.5",children:[o.signal.id," | ",o.signal.priority.toUpperCase()]}),e.jsxs("div",{className:"mt-2 space-y-1 text-[9px]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{style:{color:N[o.health]},children:o.health.toUpperCase()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Congestion:"}),e.jsxs("span",{style:{color:o.congestion>60?"#ff003c":o.congestion>40?"#ffb800":"#00ff41"},children:[o.congestion,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Impact:"}),e.jsx("span",{style:{color:o.health==="offline"?"#ff003c":o.health==="fault"?"#ff6600":"#00ff41"},children:o.health==="offline"?"SEVERE BACKUP":o.health==="fault"?"CAUSING DELAY":o.health==="degraded"?"MINOR DELAY":"NORMAL FLOW"})]})]})]})})]})}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-black/60 backdrop-blur-sm relative z-20",children:[e.jsx("div",{className:"flex items-center gap-3",children:[{c:"#00ff41",l:"OK"},{c:"#ffb800",l:"DEGR"},{c:"#ff6600",l:"FAULT"},{c:"#ff003c",l:"DOWN"}].map(d=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:d.c,opacity:.8}}),e.jsx("span",{className:"text-[5px] font-mono text-gray-600 tracking-wider",children:d.l})]},d.l))}),e.jsxs("span",{className:"text-[6px] font-mono text-gray-700 tracking-wider",children:[m.filter(d=>d.health!=="operational").length," ALERTS |"," ",M.length," SIGNALS"]})]})]}):e.jsx("div",{className:"bg-[#0a1215] border border-info/10 p-5 corner-borders relative flex items-center justify-center",style:{minHeight:"460px"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-info status-dot"}),e.jsx("span",{className:"text-[10px] font-mono text-info tracking-widest",children:"LOADING MAP ENGINE..."})]})})}const R=[{id:"central",name:"CENTRAL DELHI",abbr:"CTR",baseWeight:1.2,icon:"◆"},{id:"north",name:"NORTH DELHI",abbr:"NRT",baseWeight:.9,icon:"▲"},{id:"south",name:"SOUTH DELHI",abbr:"STH",baseWeight:1.1,icon:"▼"},{id:"east",name:"EAST DELHI",abbr:"EST",baseWeight:.8,icon:"►"},{id:"west",name:"WEST DELHI",abbr:"WST",baseWeight:.85,icon:"◄"},{id:"ne",name:"NORTH-EAST",abbr:"N-E",baseWeight:.7,icon:"◇"},{id:"nw",name:"NORTH-WEST",abbr:"N-W",baseWeight:.75,icon:"◇"},{id:"se",name:"SOUTH-EAST",abbr:"S-E",baseWeight:.95,icon:"◇"},{id:"sw",name:"SOUTH-WEST",abbr:"S-W",baseWeight:1,icon:"◇"}];function ye(a){return a>=80?"#ff003c":a>=60?"#ff6600":a>=40?"#ffb800":a>=20?"#00d4ff":"#00ff41"}function ue(a){return a>=80?"GRIDLOCK":a>=60?"HEAVY":a>=40?"SLOW":a>=20?"MOVING":"CLEAR"}function je({data:a}){const s=f.useMemo(()=>{const n=a.length?a.reduce((l,m)=>l+m.congestion_level,0)/a.length:40,i=a.length?a.reduce((l,m)=>l+m.speed,0)/a.length:30;return R.map((l,m)=>{const g=(m*23+9)%35-17,d=Math.max(5,Math.min(95,Math.round(n*l.baseWeight+g))),x=Math.max(5,Math.round(i*(1-d/130))),y=Math.max(0,Math.round(d/20+(m*7+3)%4)),p=Math.round(2+(m*11+5)%5),h=d>55?Math.round((m*13+2)%3):0;return{...l,congestion:d,speed:x,incidents:y,signals:p,faults:h,color:ye(d),status:ue(d)}}).sort((l,m)=>m.congestion-l.congestion)},[a]),o=s[0],t=s[s.length-1],r=s.reduce((n,i)=>n+i.incidents,0),c=s.reduce((n,i)=>n+i.faults,0);return e.jsxs("div",{className:"bg-gray-950 border border-info/10 p-5 corner-borders relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-info/20 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-mono text-info tracking-wider",children:[">"," ZONE_ANALYSIS // DELHI NCR SECTORS"]}),e.jsxs("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:["AREA-WISE TRAFFIC INTELLIGENCE — ",R.length," ZONES"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c>0&&e.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 border border-danger/20 bg-danger/5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-danger rounded-full status-dot"}),e.jsxs("span",{className:"text-[7px] font-mono text-danger tracking-wider",children:[c," FAULTS"]})]}),e.jsxs("span",{className:"text-[7px] font-mono text-gray-600",children:[e.jsx(u,{value:r})," INCIDENTS"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1.5 mb-3",children:[e.jsxs("div",{className:"border px-2 py-1.5",style:{borderColor:o.color+"20",backgroundColor:o.color+"05"},children:[e.jsx("p",{className:"text-[5px] font-mono text-gray-700 tracking-widest",children:"WORST ZONE"}),e.jsxs("p",{className:"text-[10px] font-mono font-bold tracking-wider",style:{color:o.color},children:[o.abbr," — ",o.congestion,"%"]})]}),e.jsxs("div",{className:"border px-2 py-1.5",style:{borderColor:t.color+"20",backgroundColor:t.color+"05"},children:[e.jsx("p",{className:"text-[5px] font-mono text-gray-700 tracking-widest",children:"BEST ZONE"}),e.jsxs("p",{className:"text-[10px] font-mono font-bold tracking-wider",style:{color:t.color},children:[t.abbr," — ",t.congestion,"%"]})]})]}),e.jsx("div",{className:"space-y-1 max-h-[340px] overflow-y-auto pr-1",children:s.map((n,i)=>e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 border-l-2 hover:bg-info/5 transition-colors animate-fade-up",style:{borderLeftColor:n.color+"60",animationDelay:`${i*40}ms`},children:[e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0 w-8",children:[e.jsx("span",{className:"text-[8px] font-mono font-bold",style:{color:n.color},children:i+1}),e.jsx("span",{className:"text-[8px]",style:{color:n.color+"80"},children:n.icon})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-[9px] font-mono font-bold text-gray-200 tracking-wider truncate",children:n.abbr}),e.jsx("span",{className:"text-[6px] font-mono text-gray-600 truncate",children:n.name})]}),e.jsx("span",{className:"text-[6px] font-mono px-1 py-0.5 border tracking-wider shrink-0",style:{color:n.color,borderColor:n.color+"30"},children:n.status})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-gray-900 overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-700",style:{width:`${n.congestion}%`,backgroundColor:n.color,boxShadow:n.congestion>60?`0 0 6px ${n.color}50`:"none"}})}),e.jsxs("span",{className:"text-[8px] font-mono font-bold tabular-nums w-7 text-right",style:{color:n.color},children:[n.congestion,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[6px] font-mono text-gray-500",children:[n.speed," ",e.jsx("span",{className:"text-gray-700",children:"km/h"})]}),e.jsx("span",{className:"text-[5px] font-mono text-gray-700",children:"|"}),e.jsxs("span",{className:"text-[6px] font-mono text-gray-500",children:[n.incidents," ",e.jsx("span",{className:"text-gray-700",children:"incidents"})]}),e.jsx("span",{className:"text-[5px] font-mono text-gray-700",children:"|"}),e.jsxs("span",{className:"text-[6px] font-mono text-gray-500",children:[n.signals," ",e.jsx("span",{className:"text-gray-700",children:"signals"})]}),n.faults>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[5px] font-mono text-gray-700",children:"|"}),e.jsxs("span",{className:"text-[6px] font-mono text-danger font-bold",children:[n.faults," FAULT"]})]})]})]})]},n.id))}),e.jsxs("div",{className:"mt-3 pt-2 border-t border-info/5",children:[e.jsx("p",{className:"text-[7px] font-mono text-gray-600 tracking-wider mb-1.5",children:"ZONE HEAT MATRIX"}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:[{label:"NW",zone:s.find(n=>n.id==="nw")},{label:"N",zone:s.find(n=>n.id==="north")},{label:"NE",zone:s.find(n=>n.id==="ne")},{label:"W",zone:s.find(n=>n.id==="west")},{label:"CTR",zone:s.find(n=>n.id==="central")},{label:"E",zone:s.find(n=>n.id==="east")},{label:"SW",zone:s.find(n=>n.id==="sw")},{label:"S",zone:s.find(n=>n.id==="south")},{label:"SE",zone:s.find(n=>n.id==="se")}].map(n=>{const i=n.zone;return i?e.jsxs("div",{className:"h-8 flex items-center justify-center relative overflow-hidden",style:{backgroundColor:i.color+"12"},children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:i.color,opacity:.04+i.congestion/100*.12}}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx("span",{className:"text-[7px] font-mono font-bold block",style:{color:i.color},children:n.label}),e.jsxs("span",{className:"text-[5px] font-mono block",style:{color:i.color+"80"},children:[i.congestion,"%"]})]})]},n.label):e.jsx("div",{className:"h-8 bg-gray-900/30"},n.label)})})]})]})}const b=[{id:"SIG-001",name:"ITO Junction",zone:"CENTRAL",lat:28.6304,lng:77.2505,priority:"critical"},{id:"SIG-002",name:"Kashmere Gate",zone:"NORTH",lat:28.6667,lng:77.2273,priority:"critical"},{id:"SIG-003",name:"AIIMS Flyover",zone:"S.DELHI",lat:28.5672,lng:77.21,priority:"critical"},{id:"SIG-004",name:"Moolchand",zone:"S.DELHI",lat:28.5713,lng:77.2378,priority:"high"},{id:"SIG-005",name:"Ashram Chowk",zone:"S.DELHI",lat:28.5697,lng:77.2586,priority:"critical"},{id:"SIG-006",name:"Rajouri Garden",zone:"W.DELHI",lat:28.6492,lng:77.1224,priority:"high"},{id:"SIG-007",name:"Dhaula Kuan",zone:"SW.DELHI",lat:28.5921,lng:77.1562,priority:"critical"},{id:"SIG-008",name:"Pragati Maidan",zone:"CENTRAL",lat:28.6238,lng:77.2467,priority:"high"},{id:"SIG-009",name:"Nehru Place",zone:"SE.DELHI",lat:28.5491,lng:77.2533,priority:"high"},{id:"SIG-010",name:"Connaught Place",zone:"N.DELHI",lat:28.6315,lng:77.2167,priority:"critical"},{id:"SIG-011",name:"Lajpat Nagar",zone:"S.DELHI",lat:28.57,lng:77.24,priority:"medium"},{id:"SIG-012",name:"Anand Vihar",zone:"E.DELHI",lat:28.6469,lng:77.3161,priority:"high"},{id:"SIG-013",name:"Dwarka Sec-21",zone:"SW.DELHI",lat:28.5535,lng:77.0588,priority:"medium"},{id:"SIG-014",name:"Sarai Kale Khan",zone:"SE.DELHI",lat:28.5895,lng:77.2568,priority:"critical"},{id:"SIG-015",name:"Peeragarhi",zone:"NW.DELHI",lat:28.6769,lng:77.0939,priority:"high"},{id:"SIG-016",name:"Mundka",zone:"W.DELHI",lat:28.6835,lng:77.032,priority:"medium"},{id:"SIG-017",name:"Ber Sarai",zone:"S.DELHI",lat:28.5397,lng:77.1856,priority:"medium"},{id:"SIG-018",name:"GTB Nagar",zone:"N.DELHI",lat:28.6981,lng:77.21,priority:"medium"},{id:"SIG-019",name:"Saket",zone:"S.DELHI",lat:28.5244,lng:77.209,priority:"high"},{id:"SIG-020",name:"Mayur Vihar",zone:"E.DELHI",lat:28.5921,lng:77.2963,priority:"medium"},{id:"SIG-021",name:"Jahangirpuri",zone:"N.DELHI",lat:28.7329,lng:77.1711,priority:"medium"},{id:"SIG-022",name:"Naraina",zone:"W.DELHI",lat:28.6295,lng:77.1442,priority:"medium"},{id:"SIG-023",name:"Badarpur",zone:"SE.DELHI",lat:28.5072,lng:77.3029,priority:"high"},{id:"SIG-024",name:"Mehrauli",zone:"S.DELHI",lat:28.5245,lng:77.1855,priority:"medium"},{id:"SIG-025",name:"Wazirabad",zone:"N.DELHI",lat:28.7146,lng:77.2299,priority:"high"}];function Ne(a,s){const o=85-s*.3,t=(a*37+13)%100;return t>95?"offline":t>o?"fault":t>o-8?"degraded":"operational"}function be(a){const s=(a*53+7)%100;return s<45?"green":s<60?"yellow":"red"}function ve(a,s){return(a==="critical"?120:a==="high"?90:60)+Math.round(s*.3)}function Se(a,s){return a==="offline"?"SEVERE BACKUP":a==="fault"?s>60?"HEAVY DELAY":"CAUSING DELAY":a==="degraded"?"MINOR DELAY":s>70?"CONGESTED":s>40?"MODERATE":"NORMAL FLOW"}const Ee={operational:"#00ff41",degraded:"#ffb800",fault:"#ff6600",offline:"#ff003c"},Ce={operational:"OK",degraded:"DEGR",fault:"FAULT",offline:"DOWN"},D={critical:"#ff003c",high:"#ff6600",medium:"#ffb800"};function ke({data:a}){const s=f.useMemo(()=>{const t=a.length?a.reduce((r,c)=>r+c.congestion_level,0)/a.length:40;return b.map((r,c)=>{const n=Ne(c,t),i=n==="offline"||n==="fault"?"red":be(c),l=Math.max(5,Math.min(95,Math.round(t+(c*19+11)%40-20))),m=ve(r.priority,l),g=Math.round(m*(n==="fault"?.25:.45)),d=Se(n,l);return{...r,health:n,phase:i,congestion:l,cycleTime:m,greenTime:g,impact:d,healthColor:Ee[n]}})},[a]),o=f.useMemo(()=>{const t=s.filter(l=>l.health==="operational").length,r=s.filter(l=>l.health==="fault").length,c=s.filter(l=>l.health==="offline").length,n=s.filter(l=>l.health==="degraded").length,i=s.filter(l=>l.health==="fault"||l.health==="offline");return{operational:t,faulted:r,offline:c,degraded:n,causingDelay:i,total:b.length}},[s]);return e.jsxs("div",{className:"bg-black border border-info/10 p-5 corner-borders relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{background:"repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(0,212,255,0.01) 3px, rgba(0,212,255,0.01) 6px)"}}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-info/30 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-3 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-mono text-info tracking-wider",children:[">"," SIGNAL_CONTROL // TRAFFIC LIGHT MONITOR"]}),e.jsxs("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:["DELHI NCR — ",b.length," SIGNAL INTERSECTIONS"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 border border-brand/20 bg-brand/5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-brand rounded-full status-dot"}),e.jsxs("span",{className:"text-[7px] font-mono text-brand tracking-wider",children:[o.operational," ACTIVE"]})]}),o.faulted+o.offline>0&&e.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 border border-danger/20 bg-danger/5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-danger rounded-full status-dot"}),e.jsxs("span",{className:"text-[7px] font-mono text-danger tracking-wider",children:[o.faulted+o.offline," ALERT"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-1.5 mb-3 relative z-10",children:[{label:"OPERATIONAL",value:o.operational,color:"#00ff41"},{label:"DEGRADED",value:o.degraded,color:"#ffb800"},{label:"FAULT",value:o.faulted,color:"#ff6600"},{label:"OFFLINE",value:o.offline,color:"#ff003c"}].map(t=>e.jsxs("div",{className:"border px-2 py-2 text-center",style:{borderColor:t.color+"20",backgroundColor:t.color+"05"},children:[e.jsx("p",{className:"text-[14px] font-bold font-[Orbitron]",style:{color:t.color,textShadow:`0 0 8px ${t.color}30`},children:e.jsx(u,{value:t.value})}),e.jsx("p",{className:"text-[5px] font-mono text-gray-600 tracking-widest",children:t.label})]},t.label))}),o.causingDelay.length>0&&e.jsxs("div",{className:"relative z-10 mb-3 border border-danger/15 bg-danger/5 px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx("div",{className:"w-2 h-2 bg-danger rounded-full status-dot"}),e.jsx("span",{className:"text-[8px] font-mono text-danger tracking-widest font-bold",children:"SIGNAL DISRUPTION — TRAFFIC IMPACT DETECTED"})]}),e.jsxs("div",{className:"space-y-1",children:[o.causingDelay.slice(0,4).map(t=>e.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[e.jsx("span",{className:"text-[7px] font-mono text-danger/60",children:t.id}),e.jsx("span",{className:"text-[7px] font-mono text-gray-300 tracking-wider",children:t.name.toUpperCase()}),e.jsx("span",{className:"text-[6px] font-mono text-gray-700",children:"|"}),e.jsx("span",{className:"text-[7px] font-mono tracking-wider",style:{color:t.health==="offline"?"#ff003c":"#ff6600"},children:t.health==="offline"?"SIGNAL DOWN":"SIGNAL FAULT"}),e.jsx("span",{className:"text-[6px] font-mono text-gray-700",children:"→"}),e.jsx("span",{className:"text-[7px] font-mono text-danger tracking-wider",children:t.impact})]},t.id)),o.causingDelay.length>4&&e.jsxs("span",{className:"text-[6px] font-mono text-gray-600 pl-4",children:["+",o.causingDelay.length-4," MORE DISRUPTIONS"]})]})]}),e.jsx("div",{className:"relative z-10 max-h-[420px] overflow-y-auto pr-1 space-y-0.5",children:s.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-2.5 px-2 py-1.5 hover:bg-info/5 transition-colors animate-fade-up group",style:{animationDelay:`${r*25}ms`},children:[e.jsx("div",{className:"shrink-0 flex flex-col items-center gap-px",children:e.jsxs("svg",{width:"14",height:"34",viewBox:"0 0 14 34",children:[e.jsx("rect",{x:"1",y:"0",width:"12",height:"30",rx:"2",fill:"#0a0a0a",stroke:"#222",strokeWidth:"0.5"}),e.jsx("rect",{x:"5.5",y:"30",width:"3",height:"4",fill:"#111"}),e.jsx("circle",{cx:"7",cy:"6",r:"3.2",fill:t.phase==="red"?"#ff003c":"#1a0008",style:{filter:t.phase==="red"?"drop-shadow(0 0 3px #ff003c)":"none",transition:"fill 0.3s ease"}}),e.jsx("circle",{cx:"7",cy:"15",r:"3.2",fill:t.phase==="yellow"?"#ffb800":"#1a1400",style:{filter:t.phase==="yellow"?"drop-shadow(0 0 3px #ffb800)":"none",transition:"fill 0.3s ease"}}),e.jsx("circle",{cx:"7",cy:"24",r:"3.2",fill:t.phase==="green"?"#00ff41":"#001a08",style:{filter:t.phase==="green"?"drop-shadow(0 0 3px #00ff41)":"none",transition:"fill 0.3s ease"}}),(t.health==="fault"||t.health==="offline")&&e.jsxs("g",{stroke:"#ff003c",strokeWidth:"1.5",opacity:"0.8",children:[e.jsx("line",{x1:"2",y1:"2",x2:"12",y2:"28"}),e.jsx("line",{x1:"12",y1:"2",x2:"2",y2:"28"})]})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-[7px] font-mono text-info/40",children:t.id}),e.jsx("span",{className:"text-[9px] font-mono font-bold text-gray-200 tracking-wider truncate",children:t.name.toUpperCase()}),e.jsx("span",{className:"text-[6px] font-mono text-gray-600",children:t.zone})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsx("span",{className:"text-[5px] font-mono px-1 py-px border tracking-widest",style:{color:D[t.priority],borderColor:D[t.priority]+"30"},children:t.priority.toUpperCase()}),e.jsx("span",{className:"text-[6px] font-mono px-1.5 py-0.5 border tracking-wider font-bold",style:{color:t.healthColor,borderColor:t.healthColor+"30",backgroundColor:t.healthColor+"08"},children:Ce[t.health]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsxs("div",{className:"flex-1 h-1 bg-gray-900 overflow-hidden flex",children:[e.jsx("div",{className:"h-full bg-[#00ff41]",style:{width:`${t.greenTime/t.cycleTime*100}%`,opacity:t.health==="offline"?.1:.7,boxShadow:t.health==="operational"?"0 0 3px #00ff4140":"none"}}),e.jsx("div",{className:"h-full bg-[#ffb800]",style:{width:"8%",opacity:t.health==="offline"?.1:.6}}),e.jsx("div",{className:"h-full bg-[#ff003c]",style:{width:`${100-t.greenTime/t.cycleTime*100-8}%`,opacity:t.health==="offline"?.1:.5}})]}),e.jsxs("span",{className:"text-[7px] font-mono text-gray-500 tabular-nums w-10 text-right",children:[t.cycleTime,"s"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[6px] font-mono text-gray-500",children:["GREEN ",t.greenTime,"s"]}),e.jsx("span",{className:"text-[5px] font-mono text-gray-700",children:"|"}),e.jsxs("span",{className:"text-[6px] font-mono text-gray-500",children:["CONG ",t.congestion,"%"]}),e.jsx("span",{className:"text-[5px] font-mono text-gray-700",children:"|"}),e.jsx("span",{className:"text-[6px] font-mono tracking-wider font-bold",style:{color:t.impact.includes("SEVERE")||t.impact.includes("HEAVY")?"#ff003c":t.impact.includes("DELAY")||t.impact.includes("CONGESTED")?"#ff6600":t.impact==="MODERATE"?"#ffb800":"#00ff41"},children:t.impact})]})]})]},t.id))}),e.jsxs("div",{className:"relative z-10 mt-2 pt-2 border-t border-info/5 flex items-center justify-between",children:[e.jsxs("span",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:[o.total," SIGNALS MONITORED"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{width:"6",height:"6",children:e.jsx("circle",{cx:"3",cy:"3",r:"2.5",fill:"#00ff41"})}),e.jsx("span",{className:"text-[5px] font-mono text-gray-600 tracking-wider",children:"GREEN"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{width:"6",height:"6",children:e.jsx("circle",{cx:"3",cy:"3",r:"2.5",fill:"#ffb800"})}),e.jsx("span",{className:"text-[5px] font-mono text-gray-600 tracking-wider",children:"YELLOW"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{width:"6",height:"6",children:e.jsx("circle",{cx:"3",cy:"3",r:"2.5",fill:"#ff003c"})}),e.jsx("span",{className:"text-[5px] font-mono text-gray-600 tracking-wider",children:"RED"})]}),e.jsx("span",{className:"text-[5px] font-mono text-gray-700",children:"|"}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:"text-[5px] font-mono text-gray-600 tracking-wider",children:["UPD ",new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]})})]})]})]})}function we(a,s){return a>=28.68&&s<77.18?"NW DELHI":a>=28.68&&s>=77.26?"NE DELHI":a>=28.68?"N DELHI":a>=28.62&&a<28.68&&s>=77.18&&s<77.28?"CENTRAL":a>=28.6&&s<77.14?"W DELHI":a>=28.6&&s>=77.28?"E DELHI":a>=28.58&&a<28.64&&s>=77.18&&s<77.26?"NEW DELHI":a<28.58&&s<77.16?"SW DELHI":a<28.58&&s>=77.26?"SE DELHI":a<28.58?"S DELHI":"DELHI NCR"}function Ie({cameras:a}){const s=f.useMemo(()=>{const t=a.filter(n=>n.status==="online").length,r=a.filter(n=>n.status==="offline").length,c=a.filter(n=>n.status==="maintenance").length;return{online:t,offline:r,maintenance:c}},[a]),o=a.slice(0,8);return e.jsxs("div",{className:"bg-black border border-info/10 p-5 corner-borders relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-15",style:{background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,212,255,0.02) 2px, rgba(0,212,255,0.02) 4px)"}}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-info/30 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-3 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-mono text-info tracking-wider",children:[">"," CCTV_GRID // SURVEILLANCE NETWORK"]}),e.jsx("p",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:"LIVE CAMERA FEEDS — DELHI TRAFFIC MONITORING"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 border border-brand/20 bg-brand/5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-brand rounded-full status-dot"}),e.jsxs("span",{className:"text-[7px] font-mono text-brand tracking-wider",children:[s.online," ONLINE"]})]}),s.offline>0&&e.jsx("div",{className:"flex items-center gap-1 px-1.5 py-0.5 border border-danger/20 bg-danger/5",children:e.jsxs("span",{className:"text-[7px] font-mono text-danger tracking-wider",children:[s.offline," DOWN"]})})]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-1.5 relative z-10",children:o.map((t,r)=>{const c=t.status==="online",n=t.location?we(t.location.lat,t.location.lng):"UNKNOWN",i=c?"#00ff41":t.status==="maintenance"?"#ffb800":"#ff003c";return e.jsxs("div",{className:"border relative overflow-hidden group animate-fade-up",style:{borderColor:i+"15",backgroundColor:c?"#00ff4103":"#ff003c03",animationDelay:`${r*50}ms`},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px",style:{backgroundColor:i+"30"}}),e.jsx("div",{className:"aspect-video flex items-center justify-center relative",style:{backgroundColor:"#020502"},children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`
                          radial-gradient(ellipse at 50% 40%, rgba(0,255,65,0.06) 0%, transparent 60%),
                          repeating-linear-gradient(0deg, transparent 0px, transparent 3px, rgba(0,255,65,0.01) 3px, rgba(0,255,65,0.01) 6px)
                        `}}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[e.jsx("div",{className:"w-1 h-1 bg-brand rounded-full status-dot"}),e.jsx("span",{className:"text-[6px] font-mono text-brand/60 tracking-widest",children:"REC"})]}),e.jsx("p",{className:"text-[7px] font-mono text-brand/40 tracking-wider",children:"FEED ACTIVE"})]}),e.jsx("div",{className:"absolute bottom-1 right-1.5",children:e.jsx("span",{className:"text-[5px] font-mono text-brand/30",children:new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-4 h-4 mx-auto mb-1 border border-gray-800 flex items-center justify-center",children:e.jsx("span",{className:"text-[8px] text-gray-700",children:"X"})}),e.jsx("p",{className:"text-[6px] font-mono text-gray-700 tracking-wider",children:t.status==="maintenance"?"MAINT":"OFFLINE"})]})}),e.jsxs("div",{className:"px-1.5 py-1 flex items-center justify-between",style:{backgroundColor:i+"06"},children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:"text-[7px] font-mono text-gray-300 tracking-wider",children:["CAM_",String(t.id).padStart(3,"0")]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[5.5px] font-mono text-gray-600",children:n}),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:i}})]})]})]},t.id)})}),a.length>8&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-info/5 relative z-10 flex items-center justify-between",children:[e.jsxs("span",{className:"text-[7px] font-mono text-gray-700 tracking-wider",children:["SHOWING 8 / ",a.length," CAMERAS"]}),e.jsx(H,{status:"online"})]})]})}function Te({data:a}){const s=[...a].reverse().map(o=>({time:new Date(o.timestamp).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}),congestion:o.congestion_level,speed:o.speed}));return e.jsxs("div",{className:"bg-gray-950 border border-brand/10 p-5 corner-borders relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brand/20 to-transparent"}),e.jsxs("h3",{className:"text-xs font-mono text-brand tracking-wider mb-4",children:[">"," CONGESTION_&_SPEED // TREND ANALYSIS"]}),e.jsx(B,{width:"100%",height:300,children:e.jsxs(Q,{data:s,children:[e.jsx(J,{strokeDasharray:"3 3",stroke:"#0a1a0a"}),e.jsx(Z,{dataKey:"time",stroke:"#1a3a1a",tick:{fill:"#3a5a3a",fontSize:10,fontFamily:"JetBrains Mono"}}),e.jsx(k,{yAxisId:"left",stroke:"#1a3a1a",tick:{fill:"#3a5a3a",fontSize:10,fontFamily:"JetBrains Mono"}}),e.jsx(k,{yAxisId:"right",orientation:"right",stroke:"#1a3a1a",tick:{fill:"#3a5a3a",fontSize:10,fontFamily:"JetBrains Mono"}}),e.jsx(X,{content:e.jsx(q,{})}),e.jsx(ee,{wrapperStyle:{fontFamily:"JetBrains Mono",fontSize:"10px",color:"#3a5a3a"}}),e.jsx(w,{yAxisId:"left",type:"monotone",dataKey:"congestion",stroke:"#ff003c",strokeWidth:2,dot:!1,name:"Congestion %",animationDuration:1500,animationEasing:"ease-out"}),e.jsx(w,{yAxisId:"right",type:"monotone",dataKey:"speed",stroke:"#00ff41",strokeWidth:2,dot:!1,name:"Speed (km/h)",animationDuration:1500,animationEasing:"ease-out"})]})})]})}function Ae({open:a,onClose:s,onSuccess:o}){const[t,r]=f.useState(""),[c,n]=f.useState(""),[i,l]=f.useState(""),[m,g]=f.useState(!1);if(!a)return null;const d=async x=>{x.preventDefault(),g(!0),l("");try{await z.post("/traffic",{congestion_level:parseFloat(t),speed:parseFloat(c)}),o(),s()}catch(y){l(y.response?.data?.error?.message||"Failed to create record")}finally{g(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black/80",onClick:s}),e.jsxs("div",{className:"relative z-10 w-full max-w-md bg-gray-950 border border-brand/10 p-6 shadow-[0_0_30px_rgba(0,255,65,0.05)] corner-borders",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-brand/20 to-transparent"}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-600 hover:text-gray-400","aria-label":"Close",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsxs("h2",{className:"flex items-center gap-2 text-xs font-mono text-brand tracking-wider mb-4",children:[e.jsx(L,{className:"h-3.5 w-3.5"}),">"," ADD_TRAFFIC_DATA"]}),i&&e.jsxs("div",{className:"mb-4 border border-danger/20 bg-danger/5 p-3 text-[10px] font-mono text-danger tracking-wider",role:"alert",children:["[ERROR] ",i]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"congestion",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"CONGESTION_LEVEL (0-100%)"}),e.jsx("input",{id:"congestion",type:"number",min:"0",max:"100",step:"0.1",value:t,onChange:x=>r(x.target.value),required:!0,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"speed",className:"block text-[9px] font-mono text-gray-600 mb-1 tracking-[0.2em]",children:"SPEED (KM/H)"}),e.jsx("input",{id:"speed",type:"number",min:"0",step:"0.1",value:c,onChange:x=>n(x.target.value),required:!0,className:"w-full bg-gray-950 border border-brand/10 px-3 py-2 text-xs font-mono text-gray-300 focus:border-brand/30 focus:shadow-[0_0_10px_rgba(0,255,65,0.1)] focus:outline-none transition-all"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:s,className:"border border-brand/10 bg-gray-950 px-4 py-2 text-[10px] font-mono text-gray-400 hover:text-brand hover:border-brand/30 tracking-wider transition-colors",children:"CANCEL"}),e.jsx("button",{type:"submit",disabled:m,className:"border border-brand/20 bg-brand/5 px-4 py-2 text-[10px] font-mono text-brand hover:bg-brand/10 disabled:opacity-50 tracking-wider transition-colors",children:m?"PROCESSING...":"CREATE_RECORD"})]})]})]})]})}function Pe(){const{canWrite:a}=F(),[s,o]=f.useState(!1),[t,r]=f.useState(!1);f.useEffect(()=>{r(!0)},[]);const{data:c,loading:n,refetch:i}=E("/traffic",{page:1,limit:50,params:{sort_by:"timestamp",sort_order:"desc"}}),l=f.useMemo(()=>c.length>0||n?c:Array.from({length:50},(d,x)=>{const y=Math.floor(x/50*48),p=new Date(Date.now()-y*60*60*1e3),h=p.getHours(),O=h>=8&&h<=11||h>=17&&h<=20?55+x*17%30:20+x*13%30,S=Math.max(5,Math.min(95,O)),G=Math.max(5,Math.round(75-S*.65+x*7%10-5));return{id:x+1,congestion_level:S,speed:G,timestamp:p.toISOString()}}),[c,n]),{data:m}=E("/cameras",{page:1,limit:50}),g=f.useMemo(()=>l.length?Math.round(l.reduce((d,x)=>d+x.congestion_level,0)/l.length):0,[l]);return n&&!c.length?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(_,{})}):e.jsxs("div",{className:`space-y-4 ${t?"animate-fade-up":"opacity-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(L,{className:"h-5 w-5 text-info drop-shadow-[0_0_6px_rgba(0,212,255,0.5)]"}),e.jsx("h1",{className:"text-lg font-bold text-info font-[Orbitron] tracking-widest text-glow-cyan",children:"TRAFFIC COMMAND"}),g>60&&e.jsxs("div",{className:"flex items-center gap-1.5 ml-3 px-2 py-0.5 border border-danger/30 bg-danger/5",children:[e.jsx(P,{className:"h-3 w-3 text-danger"}),e.jsx("span",{className:"text-[9px] font-mono tracking-wider text-danger",children:"HIGH CONGESTION"})]})]}),e.jsxs("p",{className:"text-[10px] text-gray-600 font-mono tracking-[0.2em]",children:[">"," TRAFFIC_OPS // DELHI NCR REAL-TIME FLOW ANALYSIS"]})]}),a&&e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 border border-info/20 bg-info/5 px-4 py-2 text-[10px] font-mono text-info hover:bg-info/10 tracking-wider transition-colors",children:[e.jsx(te,{className:"h-3 w-3"})," ADD_DATA"]})]}),e.jsx(ge,{data:l}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(ne,{data:l}),e.jsx(je,{data:l})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(oe,{data:l}),e.jsx(Te,{data:l})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(ke,{data:l}),e.jsx(xe,{data:l})]}),e.jsx(Ie,{cameras:m}),e.jsx(Ae,{open:s,onClose:()=>o(!1),onSuccess:i})]})}export{Pe as default};
